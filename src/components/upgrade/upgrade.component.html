<div class="flex flex-col h-full items-center text-center p-2 rounded-lg bg-gray-800/20 border-2 border-[var(--color-primary-500)]/20">

  <div class="w-full p-2">
    <h2 class="text-3xl font-bold text-[var(--color-primary-400)] tracking-wider">STORE</h2>
    <p class="text-[var(--color-primary-600)] mt-1">Acquire Necro-Credits to fund your research.</p>
    <div class="mt-4 text-center">
        <p class="text-gray-400">CURRENT BALANCE</p>
        <p class="text-4xl font-bold text-yellow-400">{{ upgradeService.credits() }} NC</p>
    </div>
  </div>

  <div class="w-full space-y-4 my-6">
    <h3 class="text-lg font-bold text-[var(--color-primary-300)] border-b border-[var(--color-primary-500)]/20 pb-1 mb-3">Purchase Necro-Credits</h3>
    
    <!-- Credit Packs -->
    <div class="space-y-3">
      <button 
        (click)="purchaseCredits(20)" 
        class="w-full p-3 rounded-lg bg-black/30 hover:bg-gray-800/80 transition-all duration-300 flex items-center gap-4 border border-transparent hover:border-[var(--color-primary-500)]/30 text-left focus:outline-none focus:ring-2 focus:ring-[var(--color-primary-400)] focus:ring-offset-2 focus:ring-offset-gray-800"
        aria-label="Purchase 20 Necro-Credits for $0.99">
        <div class="p-2 rounded-md bg-[var(--color-primary-800)]/50 text-[var(--color-primary-300)]" aria-hidden="true">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v.01" /></svg>
        </div>
        <div class="flex-grow">
            <p class="font-bold text-[var(--color-primary-300)]">20 Necro-Credits</p>
            <p class="text-xs text-gray-400">A quick boost for your next scan.</p>
        </div>
        <span class="font-bold py-1 px-3 rounded-md bg-[var(--color-primary-700)] text-white">$0.99</span>
      </button>

       <button 
        (click)="purchaseCredits(50)" 
        class="w-full p-3 rounded-lg bg-black/30 hover:bg-gray-800/80 transition-all duration-300 flex items-center gap-4 border border-transparent hover:border-[var(--color-primary-500)]/30 text-left focus:outline-none focus:ring-2 focus:ring-[var(--color-primary-400)] focus:ring-offset-2 focus:ring-offset-gray-800"
        aria-label="Purchase 50 Necro-Credits for $1.99">
          <div class="p-2 rounded-md bg-[var(--color-primary-800)]/50 text-[var(--color-primary-300)]" aria-hidden="true">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M17 9V7a2 2 0 00-2-2H9a2 2 0 00-2 2v2m4 6h.01M12 12h.01M12 15h.01M12 18h.01" /></svg>
          </div>
          <div class="flex-grow">
              <p class="font-bold text-[var(--color-primary-300)]">50 Necro-Credits</p>
              <p class="text-xs text-gray-400">Stock up for a busy night.</p>
          </div>
          <span class="font-bold py-1 px-3 rounded-md bg-[var(--color-primary-700)] text-white">$1.99</span>
      </button>

       <button 
        (click)="purchaseCredits(150)" 
        class="w-full p-3 rounded-lg bg-black/30 hover:bg-gray-800/80 transition-all duration-300 flex items-center gap-4 border border-transparent hover:border-[var(--color-primary-500)]/30 text-left focus:outline-none focus:ring-2 focus:ring-[var(--color-primary-400)] focus:ring-offset-2 focus:ring-offset-gray-800"
        aria-label="Purchase 150 Necro-Credits for $4.99, best value">
        <div class="p-2 rounded-md bg-[var(--color-primary-800)]/50 text-[var(--color-primary-300)]" aria-hidden="true">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z" /></svg>
        </div>
        <div class="flex-grow">
            <p class="font-bold text-[var(--color-primary-300)]">150 Necro-Credits</p>
            <p class="text-xs text-gray-400">Best value for serious investigators.</p>
        </div>
        <span class="font-bold py-1 px-3 rounded-md bg-[var(--color-primary-700)] text-white">$4.99</span>
    </button>
    </div>
  </div>

  <div class="w-full space-y-4 my-6">
    <h3 class="text-lg font-bold text-[var(--color-primary-300)] border-b border-[var(--color-primary-500)]/20 pb-1 mb-3">Unlock Field Modules</h3>
    <div class="space-y-3 text-left">
      <div class="flex items-center justify-between bg-black/30 p-3 rounded-lg border border-[var(--color-primary-500)]/20">
        <div>
          <p class="font-bold text-[var(--color-primary-300)]">Spirit Box</p>
          <p class="text-xs text-gray-400">Sensor-driven word generator.</p>
        </div>
        <button class="px-3 py-1 rounded-md bg-[var(--color-primary-700)] text-white text-xs"
          (click)="unlockFeature('spiritBox')">20 NC</button>
      </div>
      <div class="flex items-center justify-between bg-black/30 p-3 rounded-lg border border-[var(--color-primary-500)]/20">
        <div>
          <p class="font-bold text-[var(--color-primary-300)]">Audio Analyzer</p>
          <p class="text-xs text-gray-400">Visual spectrum for EVP sweeps.</p>
        </div>
        <button class="px-3 py-1 rounded-md bg-[var(--color-primary-700)] text-white text-xs"
          (click)="unlockFeature('audioAnalyzer')">15 NC</button>
      </div>
      <div class="flex items-center justify-between bg-black/30 p-3 rounded-lg border border-[var(--color-primary-500)]/20">
        <div>
          <p class="font-bold text-[var(--color-primary-300)]">Export Logs</p>
          <p class="text-xs text-gray-400">Export session timeline.</p>
        </div>
        <button class="px-3 py-1 rounded-md bg-[var(--color-primary-700)] text-white text-xs"
          (click)="unlockFeature('exportLogs')">10 NC</button>
      </div>
      <div class="flex items-center justify-between bg-black/30 p-3 rounded-lg border border-[var(--color-primary-500)]/20">
        <div>
          <p class="font-bold text-[var(--color-primary-300)]">Premium Themes</p>
          <p class="text-xs text-gray-400">Lab palettes + night vision.</p>
        </div>
        <button class="px-3 py-1 rounded-md bg-[var(--color-primary-700)] text-white text-xs"
          (click)="unlockFeature('premiumThemes')">10 NC</button>
      </div>
    </div>
  </div>
  
  @if (!upgradeService.isPro()) {
    <div class="w-full pt-4 border-t border-[var(--color-primary-500)]/20">
        <h3 class="text-lg font-bold text-yellow-300">Become a Pro Investigator</h3>
        <p class="text-sm text-gray-400 my-2">Get <span class="font-bold text-white">100 NC</span> every month, an exclusive UI theme, and priority access to new features.</p>
        <button 
          (click)="purchasePro()" 
          class="w-full bg-yellow-600 hover:bg-yellow-500 text-white font-bold py-3 px-4 rounded-lg transition-colors text-lg shadow-[0_0_15px_rgba(252,211,77,0.5)] hover:shadow-[0_0_25px_rgba(252,211,77,0.8)] focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:ring-offset-2 focus:ring-offset-gray-800"
          aria-label="Subscribe to Pro membership for $4.99 per month">
            Subscribe Now - $4.99/month
        </button>
    </div>
  } @else {
     <div class="w-full p-3 rounded-lg bg-yellow-800/50 text-center border border-yellow-500/50" role="status">
        <p class="font-bold text-yellow-300">PRO STATUS ACTIVE</p>
        <p class="text-xs text-yellow-400">Your next credit stipend arrives soon.</p>
     </div>
  }

</div>
