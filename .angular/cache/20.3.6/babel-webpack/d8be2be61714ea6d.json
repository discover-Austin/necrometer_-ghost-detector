{"ast":null,"code":"import { EventEmitter, signal, computed, inject, effect } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { SpectralMapComponent } from '../spectral-map/spectral-map.component';\nimport { GeoTriangulatorComponent } from '../geo-triangulator/geo-triangulator.component';\nimport { DeviceStateService } from '../../services/device-state.service';\nimport * as i0 from \"@angular/core\";\nexport let ScannerComponent = /*#__PURE__*/(() => {\n  var _staticBlock;\n  class ScannerComponent {\n    constructor() {\n      this.detection = new EventEmitter();\n      this.status = signal('CALIBRATING...', ...(ngDevMode ? [{\n        debugName: \"status\"\n      }] : []));\n      this.lastDetectionTime = 0;\n      this.deviceState = inject(DeviceStateService);\n      this.barColorClass = computed(() => {\n        const reading = this.deviceState.emfReading();\n        if (reading > 90) return 'bg-red-500';\n        if (reading > 75) return 'bg-yellow-500';\n        if (reading > 40) return 'bg-teal-400';\n        return 'bg-green-500';\n      }, ...(ngDevMode ? [{\n        debugName: \"barColorClass\"\n      }] : []));\n      this.statusColorClass = computed(() => {\n        const reading = this.deviceState.emfReading();\n        if (reading > 90) return 'text-red-400 animate-pulse';\n        if (reading > 75) return 'text-yellow-400';\n        if (reading > 40) return 'text-teal-300';\n        return 'text-green-400';\n      }, ...(ngDevMode ? [{\n        debugName: \"statusColorClass\"\n      }] : []));\n      this.scannerContainerStyles = computed(() => {\n        const reading = this.deviceState.emfReading();\n        let opacity = 0;\n        let duration = 5;\n        let blur = 0;\n        if (reading > 5) {\n          opacity = reading / 100 * 0.4;\n          duration = Math.max(0.5, 3 - reading / 100 * 2.5); // Faster pulse with higher reading\n          blur = reading / 100 * 20;\n        }\n        return {\n          '--glow-color': `rgba(52, 211, 153, ${opacity})`,\n          '--glow-blur': `0 0 ${blur}px var(--glow-color)`,\n          'animationDuration': `${duration}s`\n        };\n      }, ...(ngDevMode ? [{\n        debugName: \"scannerContainerStyles\"\n      }] : []));\n      this.backgroundDistortionOpacity = computed(() => {\n        const reading = this.deviceState.emfReading();\n        if (reading < 10) return 0;\n        return Math.min(reading / 100 * 0.3, 0.3); // Max 30% opacity\n      }, ...(ngDevMode ? [{\n        debugName: \"backgroundDistortionOpacity\"\n      }] : []));\n      effect(() => {\n        const reading = this.deviceState.emfReading();\n        this.updateStatus(reading);\n        const detectionCooldown = 10000; // 10 seconds\n        const now = Date.now();\n        // Trigger a detection event if reading is critical and cooldown has passed\n        if (reading > 90 && now - this.lastDetectionTime > detectionCooldown) {\n          this.triggerDetection(reading);\n          this.lastDetectionTime = now;\n          // Reset EMF slightly to prevent immediate re-triggering\n          this.deviceState.emfReading.set(20);\n        }\n      });\n    }\n    updateStatus(reading) {\n      if (reading < 10) this.status.set('SYSTEM NOMINAL');else if (reading < 40) this.status.set('TRACE ENERGY DETECTED');else if (reading < 75) this.status.set('MODERATE FIELD DISTURBANCE');else if (reading < 90) this.status.set('HIGH EMF WARNING');else this.status.set('!!! CRITICAL EVENT IMMINENT !!!');\n    }\n    triggerDetection(reading) {\n      let strength = 'weak';\n      if (reading > 98) strength = 'critical';else if (reading > 95) strength = 'strong';else if (reading > 90) strength = 'moderate';\n      this.detection.emit({\n        emf: parseFloat(reading.toFixed(2)),\n        strength\n      });\n    }\n    static #_ = _staticBlock = () => (this.ɵfac = function ScannerComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || ScannerComponent)();\n    }, this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: ScannerComponent,\n      selectors: [[\"app-scanner\"]],\n      outputs: {\n        detection: \"detection\"\n      },\n      decls: 24,\n      vars: 15,\n      consts: [[1, \"relative\", \"flex\", \"flex-col\", \"items-center\", \"justify-center\", \"h-full\", \"text-center\", \"p-4\", \"overflow-hidden\"], [1, \"absolute\", \"inset-0\", \"bg-[var(--color-background)]\"], [1, \"absolute\", \"inset-0\", \"radial-gradient-scanner\"], [1, \"absolute\", \"inset-0\", \"noise-overlay-scanner\"], [1, \"relative\", \"z-10\", \"flex\", \"flex-col\", \"items-center\", \"justify-between\", \"h-full\", \"w-full\", \"max-w-xs\"], [1, \"w-full\", \"text-center\"], [1, \"text-sm\", \"font-bold\", \"text-gray-400\", \"uppercase\", \"tracking-widest\"], [1, \"text-xl\", \"font-bold\", \"tracking-wider\"], [1, \"relative\", \"flex-grow\", \"flex\", \"items-center\", \"justify-center\", \"w-full\"], [1, \"relative\", \"font-mono\", \"text-8xl\", \"font-bold\", \"text-[var(--color-primary-300)]\", \"drop-shadow-[0_0_12px_var(--color-primary-500)]\"], [1, \"glitch-effect\"], [1, \"absolute\", \"bottom-1/2\", \"translate-y-8\", \"right-0\", \"font-mono\", \"text-2xl\", \"text-[var(--color-primary-500)]\"], [1, \"w-full\", \"space-y-4\"], [1, \"flex\", \"gap-4\", \"w-full\", \"h-24\"], [1, \"flex-1\", \"p-2\", \"rounded-lg\", \"bg-black/30\", \"border\", \"border-[var(--color-primary-800)]\"], [3, \"emfReading\"], [1, \"w-full\", \"bg-black/50\", \"rounded-md\", \"h-5\", \"p-1\", \"border-2\", \"border-[var(--color-primary-900)]\"], [1, \"h-full\", \"rounded-sm\", \"transition-all\", \"duration-150\"]],\n      template: function ScannerComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0);\n          i0.ɵɵelement(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3);\n          i0.ɵɵelementStart(4, \"div\", 4)(5, \"div\", 5)(6, \"p\", 6);\n          i0.ɵɵtext(7, \"System Status\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(8, \"p\", 7);\n          i0.ɵɵtext(9);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(10, \"div\", 8)(11, \"div\", 9)(12, \"span\", 10);\n          i0.ɵɵtext(13);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(14, \"p\", 11);\n          i0.ɵɵtext(15, \"\\u00B5T\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(16, \"div\", 12)(17, \"div\", 13)(18, \"div\", 14);\n          i0.ɵɵelement(19, \"app-geo-triangulator\", 15);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(20, \"div\", 14);\n          i0.ɵɵelement(21, \"app-spectral-map\", 15);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(22, \"div\", 16);\n          i0.ɵɵelement(23, \"div\", 17);\n          i0.ɵɵelementEnd()()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(2);\n          i0.ɵɵstyleProp(\"opacity\", ctx.backgroundDistortionOpacity());\n          i0.ɵɵadvance();\n          i0.ɵɵstyleProp(\"opacity\", ctx.backgroundDistortionOpacity() * 0.5);\n          i0.ɵɵadvance(5);\n          i0.ɵɵclassMap(ctx.statusColorClass());\n          i0.ɵɵadvance();\n          i0.ɵɵtextInterpolate(ctx.status());\n          i0.ɵɵadvance(2);\n          i0.ɵɵattribute(\"data-text\", ctx.deviceState.emfReading().toFixed(2));\n          i0.ɵɵadvance(2);\n          i0.ɵɵtextInterpolate(ctx.deviceState.emfReading().toFixed(2));\n          i0.ɵɵadvance(6);\n          i0.ɵɵproperty(\"emfReading\", ctx.deviceState.emfReading());\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"emfReading\", ctx.deviceState.emfReading());\n          i0.ɵɵadvance(2);\n          i0.ɵɵclassMap(ctx.barColorClass());\n          i0.ɵɵstyleProp(\"width\", ctx.deviceState.emfReading(), \"%\");\n        }\n      },\n      dependencies: [CommonModule, SpectralMapComponent, GeoTriangulatorComponent],\n      styles: [\".radial-gradient-scanner[_ngcontent-%COMP%]{background:radial-gradient(circle at center,var(--color-primary-800) 0%,transparent 60%);animation:_ngcontent-%COMP%_pulse 4s infinite ease-in-out}.noise-overlay-scanner[_ngcontent-%COMP%]{background-image:url('data:image/svg+xml,<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 800 800\\\"><filter id=\\\"noise\\\"><feTurbulence type=\\\"fractalNoise\\\" baseFrequency=\\\"0.65\\\" numOctaves=\\\"3\\\" stitchTiles=\\\"stitch\\\"/></filter><rect width=\\\"100%\\\" height=\\\"100%\\\" filter=\\\"url(%23noise)\\\"/></svg>');opacity:.1}@keyframes _ngcontent-%COMP%_pulse{0%,to{transform:scale(1);opacity:.2}50%{transform:scale(1.2);opacity:.3}}.glitch-effect[_ngcontent-%COMP%]{position:relative;display:inline-block}.glitch-effect[_ngcontent-%COMP%]:before, .glitch-effect[_ngcontent-%COMP%]:after{content:attr(data-text);position:absolute;top:0;left:0;width:100%;height:100%;background:var(--color-background);overflow:hidden}.glitch-effect[_ngcontent-%COMP%]:before{left:2px;text-shadow:-1px 0 red;animation:_ngcontent-%COMP%_glitch-anim-1 2s infinite linear reverse}.glitch-effect[_ngcontent-%COMP%]:after{left:-2px;text-shadow:-1px 0 blue;animation:_ngcontent-%COMP%_glitch-anim-2 2s infinite linear reverse}@keyframes _ngcontent-%COMP%_glitch-anim-1{0%,10%,12%,to{clip-path:inset(0 0 0 0)}10.5%{clip-path:inset(20px 0 80px 0)}11%{clip-path:inset(50px 0 30px 0)}11.5%{clip-path:inset(10px 0 90px 0)}}@keyframes _ngcontent-%COMP%_glitch-anim-2{0%,10%,12%,to{clip-path:inset(0 0 0 0)}10.5%{clip-path:inset(80px 0 10px 0)}11%{clip-path:inset(40px 0 20px 0)}11.5%{clip-path:inset(70px 0 5px 0)}}\"],\n      changeDetection: 0\n    }));\n  }\n  _staticBlock();\n  return ScannerComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}