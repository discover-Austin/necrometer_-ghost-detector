{"ast":null,"code":"import { EventEmitter, signal, inject } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { UpgradeService } from '../../services/upgrade.service';\nimport { GeminiService } from '../../services/gemini.service';\nimport { AudioService } from '../../services/audio.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nconst _forTrack0 = ($index, $item) => $item.id;\nfunction LogbookComponent_Conditional_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵdomElementStart(0, \"div\", 2);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵdomElementStart(1, \"svg\", 6);\n    i0.ɵɵdomElement(2, \"path\", 7);\n    i0.ɵɵdomElementEnd();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵdomElementStart(3, \"p\", 8);\n    i0.ɵɵtext(4, \"Analyzing Spectral Data...\");\n    i0.ɵɵdomElementEnd();\n    i0.ɵɵdomElementStart(5, \"p\", 9);\n    i0.ɵɵtext(6, \"Connecting to the other side.\");\n    i0.ɵɵdomElementEnd()();\n  }\n}\nfunction LogbookComponent_Conditional_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵdomElementStart(0, \"div\", 3);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵdomElementStart(1, \"svg\", 10);\n    i0.ɵɵdomElement(2, \"path\", 11);\n    i0.ɵɵdomElementEnd();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵdomElementStart(3, \"p\", 12);\n    i0.ɵɵtext(4, \"Analysis Failed\");\n    i0.ɵɵdomElementEnd();\n    i0.ɵɵdomElementStart(5, \"p\", 13);\n    i0.ɵɵtext(6);\n    i0.ɵɵdomElementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(ctx_r0.error());\n  }\n}\nfunction LogbookComponent_Conditional_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵdomElementStart(0, \"div\", 4);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵdomElementStart(1, \"svg\", 14);\n    i0.ɵɵdomElement(2, \"path\", 15);\n    i0.ɵɵdomElementEnd();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵdomElementStart(3, \"p\", 16);\n    i0.ɵɵtext(4, \"No entities logged.\");\n    i0.ɵɵdomElementEnd();\n    i0.ɵɵdomElementStart(5, \"p\", 17);\n    i0.ɵɵtext(6, \"Return to the scanner to find activity.\");\n    i0.ɵɵdomElementEnd()();\n  }\n}\nfunction LogbookComponent_Conditional_6_For_2_Conditional_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵdomElementStart(0, \"span\", 25);\n    i0.ɵɵtext(1, \"[CONTAINED]\");\n    i0.ɵɵdomElementEnd();\n  }\n}\nfunction LogbookComponent_Conditional_6_For_2_Conditional_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵdomElementStart(0, \"div\", 29)(1, \"div\", 39)(2, \"p\", 40);\n    i0.ɵɵtext(3, \"Instability\");\n    i0.ɵɵdomElementEnd();\n    i0.ɵɵdomElementStart(4, \"p\", 41);\n    i0.ɵɵtext(5);\n    i0.ɵɵdomElementEnd()();\n    i0.ɵɵdomElementStart(6, \"div\", 42);\n    i0.ɵɵdomElement(7, \"div\", 43);\n    i0.ɵɵdomElementEnd()();\n  }\n  if (rf & 2) {\n    const entity_r3 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\"\", entity_r3.instability, \"%\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵstyleProp(\"width\", entity_r3.instability, \"%\");\n  }\n}\nfunction LogbookComponent_Conditional_6_For_2_Conditional_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵdomElementStart(0, \"p\", 35);\n    i0.ɵɵtext(1);\n    i0.ɵɵdomElementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r0.labError());\n  }\n}\nfunction LogbookComponent_Conditional_6_For_2_Conditional_29_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵdomElementStart(0, \"div\")(1, \"h4\", 44);\n    i0.ɵɵtext(2, \"Database Cross-Reference\");\n    i0.ɵɵdomElementEnd();\n    i0.ɵɵdomElementStart(3, \"p\", 45);\n    i0.ɵɵtext(4);\n    i0.ɵɵdomElementEnd()();\n  }\n  if (rf & 2) {\n    const result_r4 = ctx;\n    i0.ɵɵadvance(3);\n    i0.ɵɵclassProp(\"text-gray-300\", result_r4.match)(\"text-yellow-400\", !result_r4.match);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(result_r4.details);\n  }\n}\nfunction LogbookComponent_Conditional_6_For_2_Conditional_30_Conditional_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵdomElementStart(0, \"span\", 48);\n    i0.ɵɵtext(1, \"Checking...\");\n    i0.ɵɵdomElementEnd();\n  }\n}\nfunction LogbookComponent_Conditional_6_For_2_Conditional_30_Conditional_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵdomElementStart(0, \"span\");\n    i0.ɵɵtext(1, \"1 NC\");\n    i0.ɵɵdomElementEnd();\n  }\n}\nfunction LogbookComponent_Conditional_6_For_2_Conditional_30_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵdomElementStart(0, \"div\", 38)(1, \"div\")(2, \"h4\", 44);\n    i0.ɵɵtext(3, \"Cross-Reference\");\n    i0.ɵɵdomElementEnd();\n    i0.ɵɵdomElementStart(4, \"p\", 46);\n    i0.ɵɵtext(5, \"Check against global database.\");\n    i0.ɵɵdomElementEnd()();\n    i0.ɵɵdomElementStart(6, \"button\", 47);\n    i0.ɵɵdomListener(\"click\", function LogbookComponent_Conditional_6_For_2_Conditional_30_Template_button_click_6_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r0 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r0.runCrossReference());\n    });\n    i0.ɵɵconditionalCreate(7, LogbookComponent_Conditional_6_For_2_Conditional_30_Conditional_7_Template, 2, 0, \"span\", 48)(8, LogbookComponent_Conditional_6_For_2_Conditional_30_Conditional_8_Template, 2, 0, \"span\");\n    i0.ɵɵdomElementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(6);\n    i0.ɵɵdomProperty(\"disabled\", ctx_r0.labState() !== \"idle\");\n    i0.ɵɵadvance();\n    i0.ɵɵconditional(ctx_r0.labState() === \"cross-referencing\" ? 7 : 8);\n  }\n}\nfunction LogbookComponent_Conditional_6_For_2_Conditional_32_For_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵdomElementStart(0, \"span\", 50);\n    i0.ɵɵtext(1);\n    i0.ɵɵdomElementEnd();\n  }\n  if (rf & 2) {\n    const emotion_r6 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(emotion_r6);\n  }\n}\nfunction LogbookComponent_Conditional_6_For_2_Conditional_32_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵdomElementStart(0, \"div\")(1, \"h4\", 44);\n    i0.ɵɵtext(2, \"Emotional Resonance\");\n    i0.ɵɵdomElementEnd();\n    i0.ɵɵdomElementStart(3, \"div\", 49);\n    i0.ɵɵrepeaterCreate(4, LogbookComponent_Conditional_6_For_2_Conditional_32_For_5_Template, 2, 1, \"span\", 50, i0.ɵɵrepeaterTrackByIdentity);\n    i0.ɵɵdomElementEnd();\n    i0.ɵɵdomElementStart(6, \"p\", 51);\n    i0.ɵɵtext(7);\n    i0.ɵɵdomElementEnd()();\n  }\n  if (rf & 2) {\n    const result_r7 = ctx;\n    i0.ɵɵadvance(4);\n    i0.ɵɵrepeater(result_r7.emotions);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(result_r7.summary);\n  }\n}\nfunction LogbookComponent_Conditional_6_For_2_Conditional_33_Conditional_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵdomElementStart(0, \"span\", 48);\n    i0.ɵɵtext(1, \"Scanning...\");\n    i0.ɵɵdomElementEnd();\n  }\n}\nfunction LogbookComponent_Conditional_6_For_2_Conditional_33_Conditional_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵdomElementStart(0, \"span\");\n    i0.ɵɵtext(1, \"2 NC\");\n    i0.ɵɵdomElementEnd();\n  }\n}\nfunction LogbookComponent_Conditional_6_For_2_Conditional_33_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n    i0.ɵɵdomElementStart(0, \"div\", 38)(1, \"div\")(2, \"h4\", 44);\n    i0.ɵɵtext(3, \"Resonance Scan\");\n    i0.ɵɵdomElementEnd();\n    i0.ɵɵdomElementStart(4, \"p\", 46);\n    i0.ɵɵtext(5, \"Analyze emotional signature.\");\n    i0.ɵɵdomElementEnd()();\n    i0.ɵɵdomElementStart(6, \"button\", 47);\n    i0.ɵɵdomListener(\"click\", function LogbookComponent_Conditional_6_For_2_Conditional_33_Template_button_click_6_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r0 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r0.runEmotionalResonanceScan());\n    });\n    i0.ɵɵconditionalCreate(7, LogbookComponent_Conditional_6_For_2_Conditional_33_Conditional_7_Template, 2, 0, \"span\", 48)(8, LogbookComponent_Conditional_6_For_2_Conditional_33_Conditional_8_Template, 2, 0, \"span\");\n    i0.ɵɵdomElementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(6);\n    i0.ɵɵdomProperty(\"disabled\", ctx_r0.labState() !== \"idle\");\n    i0.ɵɵadvance();\n    i0.ɵɵconditional(ctx_r0.labState() === \"scanning-resonance\" ? 7 : 8);\n  }\n}\nfunction LogbookComponent_Conditional_6_For_2_Conditional_35_For_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵdomElementStart(0, \"li\");\n    i0.ɵɵtext(1);\n    i0.ɵɵdomElementEnd();\n  }\n  if (rf & 2) {\n    const step_r9 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(step_r9);\n  }\n}\nfunction LogbookComponent_Conditional_6_For_2_Conditional_35_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵdomElementStart(0, \"div\")(1, \"h4\", 52);\n    i0.ɵɵtext(2, \"Containment Ritual Successful\");\n    i0.ɵɵdomElementEnd();\n    i0.ɵɵdomElementStart(3, \"ol\", 53);\n    i0.ɵɵrepeaterCreate(4, LogbookComponent_Conditional_6_For_2_Conditional_35_For_5_Template, 2, 1, \"li\", null, i0.ɵɵrepeaterTrackByIdentity);\n    i0.ɵɵdomElementEnd();\n    i0.ɵɵdomElementStart(6, \"p\", 54);\n    i0.ɵɵtext(7);\n    i0.ɵɵdomElementEnd()();\n  }\n  if (rf & 2) {\n    const result_r10 = ctx;\n    i0.ɵɵadvance(4);\n    i0.ɵɵrepeater(result_r10.steps);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(result_r10.outcome);\n  }\n}\nfunction LogbookComponent_Conditional_6_For_2_Conditional_36_Conditional_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵdomElementStart(0, \"span\", 48);\n    i0.ɵɵtext(1, \"Containing...\");\n    i0.ɵɵdomElementEnd();\n  }\n}\nfunction LogbookComponent_Conditional_6_For_2_Conditional_36_Conditional_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵdomElementStart(0, \"span\");\n    i0.ɵɵtext(1, \"10 NC\");\n    i0.ɵɵdomElementEnd();\n  }\n}\nfunction LogbookComponent_Conditional_6_For_2_Conditional_36_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n    i0.ɵɵdomElementStart(0, \"div\", 38)(1, \"div\")(2, \"h4\", 52);\n    i0.ɵɵtext(3, \"Containment Ritual\");\n    i0.ɵɵdomElementEnd();\n    i0.ɵɵdomElementStart(4, \"p\", 46);\n    i0.ɵɵtext(5, \"Stabilize and contain the entity.\");\n    i0.ɵɵdomElementEnd()();\n    i0.ɵɵdomElementStart(6, \"button\", 55);\n    i0.ɵɵdomListener(\"click\", function LogbookComponent_Conditional_6_For_2_Conditional_36_Template_button_click_6_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r0 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r0.runContainmentRitual());\n    });\n    i0.ɵɵconditionalCreate(7, LogbookComponent_Conditional_6_For_2_Conditional_36_Conditional_7_Template, 2, 0, \"span\", 48)(8, LogbookComponent_Conditional_6_For_2_Conditional_36_Conditional_8_Template, 2, 0, \"span\");\n    i0.ɵɵdomElementEnd()();\n  }\n  if (rf & 2) {\n    const entity_r3 = i0.ɵɵnextContext().$implicit;\n    const ctx_r0 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(6);\n    i0.ɵɵdomProperty(\"disabled\", ctx_r0.labState() !== \"idle\" || entity_r3.contained);\n    i0.ɵɵadvance();\n    i0.ɵɵconditional(ctx_r0.labState() === \"containing\" ? 7 : 8);\n  }\n}\nfunction LogbookComponent_Conditional_6_For_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n    i0.ɵɵdomElementStart(0, \"div\", 19)(1, \"button\", 20);\n    i0.ɵɵdomListener(\"click\", function LogbookComponent_Conditional_6_For_2_Template_button_click_1_listener() {\n      const entity_r3 = i0.ɵɵrestoreView(_r2).$implicit;\n      const ctx_r0 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r0.selectEntity(entity_r3));\n    });\n    i0.ɵɵdomElementStart(2, \"div\", 21)(3, \"div\", 22);\n    i0.ɵɵdomElement(4, \"img\", 23);\n    i0.ɵɵdomElementStart(5, \"div\")(6, \"p\", 24);\n    i0.ɵɵtext(7);\n    i0.ɵɵconditionalCreate(8, LogbookComponent_Conditional_6_For_2_Conditional_8_Template, 2, 0, \"span\", 25);\n    i0.ɵɵdomElementEnd();\n    i0.ɵɵdomElementStart(9, \"p\", 9);\n    i0.ɵɵtext(10);\n    i0.ɵɵdomElementEnd()()();\n    i0.ɵɵdomElementStart(11, \"div\", 26)(12, \"p\", 27);\n    i0.ɵɵtext(13);\n    i0.ɵɵdomElementEnd();\n    i0.ɵɵdomElementStart(14, \"p\", 28);\n    i0.ɵɵtext(15);\n    i0.ɵɵpipe(16, \"date\");\n    i0.ɵɵdomElementEnd()()();\n    i0.ɵɵconditionalCreate(17, LogbookComponent_Conditional_6_For_2_Conditional_17_Template, 8, 3, \"div\", 29);\n    i0.ɵɵdomElementEnd();\n    i0.ɵɵdomElementStart(18, \"div\", 30)(19, \"div\", 31)(20, \"div\", 32)(21, \"div\")(22, \"h3\", 33);\n    i0.ɵɵtext(23, \"Analysis Lab\");\n    i0.ɵɵdomElementEnd();\n    i0.ɵɵdomElementStart(24, \"p\", 34);\n    i0.ɵɵtext(25);\n    i0.ɵɵdomElementEnd()();\n    i0.ɵɵconditionalCreate(26, LogbookComponent_Conditional_6_For_2_Conditional_26_Template, 2, 1, \"p\", 35);\n    i0.ɵɵdomElementStart(27, \"div\", 36)(28, \"div\", 37);\n    i0.ɵɵconditionalCreate(29, LogbookComponent_Conditional_6_For_2_Conditional_29_Template, 5, 5, \"div\")(30, LogbookComponent_Conditional_6_For_2_Conditional_30_Template, 9, 2, \"div\", 38);\n    i0.ɵɵdomElementEnd();\n    i0.ɵɵdomElementStart(31, \"div\", 37);\n    i0.ɵɵconditionalCreate(32, LogbookComponent_Conditional_6_For_2_Conditional_32_Template, 8, 1, \"div\")(33, LogbookComponent_Conditional_6_For_2_Conditional_33_Template, 9, 2, \"div\", 38);\n    i0.ɵɵdomElementEnd();\n    i0.ɵɵdomElementStart(34, \"div\", 37);\n    i0.ɵɵconditionalCreate(35, LogbookComponent_Conditional_6_For_2_Conditional_35_Template, 8, 1, \"div\")(36, LogbookComponent_Conditional_6_For_2_Conditional_36_Template, 9, 2, \"div\", 38);\n    i0.ɵɵdomElementEnd()()()()()();\n  }\n  if (rf & 2) {\n    let tmp_21_0;\n    let tmp_22_0;\n    let tmp_25_0;\n    let tmp_26_0;\n    let tmp_27_0;\n    const entity_r3 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext(2);\n    i0.ɵɵclassMap(ctx_r0.getEntryClass(entity_r3));\n    i0.ɵɵadvance(4);\n    i0.ɵɵdomProperty(\"src\", \"data:image/png;base64,\" + entity_r3.glyphB64, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵclassProp(\"text-[var(--color-primary-300)]\", !entity_r3.contained)(\"text-blue-400\", entity_r3.contained);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", entity_r3.name, \" \");\n    i0.ɵɵadvance();\n    i0.ɵɵconditional(entity_r3.contained ? 8 : -1);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(entity_r3.type);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"\", entity_r3.emfReading.toFixed(2), \" \\u00B5T\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(16, 22, entity_r3.timestamp, \"short\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵconditional(!entity_r3.contained ? 17 : -1);\n    i0.ɵɵadvance();\n    i0.ɵɵclassProp(\"grid-rows-[1fr]\", ((tmp_21_0 = ctx_r0.selectedEntity()) == null ? null : tmp_21_0.id) === entity_r3.id)(\"grid-rows-[0fr]\", ((tmp_22_0 = ctx_r0.selectedEntity()) == null ? null : tmp_22_0.id) !== entity_r3.id);\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate(entity_r3.backstory);\n    i0.ɵɵadvance();\n    i0.ɵɵconditional(ctx_r0.labError() ? 26 : -1);\n    i0.ɵɵadvance(3);\n    i0.ɵɵconditional((tmp_25_0 = ctx_r0.crossReferenceResult()) ? 29 : 30, tmp_25_0);\n    i0.ɵɵadvance(3);\n    i0.ɵɵconditional((tmp_26_0 = ctx_r0.emotionalResonanceResult()) ? 32 : 33, tmp_26_0);\n    i0.ɵɵadvance(3);\n    i0.ɵɵconditional((tmp_27_0 = ctx_r0.containmentResult()) ? 35 : 36, tmp_27_0);\n  }\n}\nfunction LogbookComponent_Conditional_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵdomElementStart(0, \"div\", 5);\n    i0.ɵɵrepeaterCreate(1, LogbookComponent_Conditional_6_For_2_Template, 37, 25, \"div\", 18, _forTrack0);\n    i0.ɵɵdomElementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵrepeater(ctx_r0.detections);\n  }\n}\nexport let LogbookComponent = /*#__PURE__*/(() => {\n  var _staticBlock;\n  class LogbookComponent {\n    constructor() {\n      this.detections = [];\n      this.isLoading = false;\n      this.error = null;\n      this.containEntity = new EventEmitter();\n      this.selectedEntity = signal(null, ...(ngDevMode ? [{\n        debugName: \"selectedEntity\"\n      }] : []));\n      this.labState = signal('idle', ...(ngDevMode ? [{\n        debugName: \"labState\"\n      }] : []));\n      this.labError = signal(null, ...(ngDevMode ? [{\n        debugName: \"labError\"\n      }] : []));\n      this.crossReferenceResult = signal(null, ...(ngDevMode ? [{\n        debugName: \"crossReferenceResult\"\n      }] : []));\n      this.emotionalResonanceResult = signal(null, ...(ngDevMode ? [{\n        debugName: \"emotionalResonanceResult\"\n      }] : []));\n      this.containmentResult = signal(null, ...(ngDevMode ? [{\n        debugName: \"containmentResult\"\n      }] : []));\n      this.upgradeService = inject(UpgradeService);\n      this.geminiService = inject(GeminiService);\n      this.audioService = inject(AudioService);\n    }\n    selectEntity(entity) {\n      if (this.selectedEntity()?.id === entity.id) {\n        this.selectedEntity.set(null); // Toggle off\n      } else {\n        this.selectedEntity.set(entity);\n        // Reset lab state when a new entity is selected\n        this.labError.set(null);\n        this.crossReferenceResult.set(null);\n        this.emotionalResonanceResult.set(null);\n        this.containmentResult.set(null);\n        this.labState.set('idle');\n      }\n    }\n    runCrossReference() {\n      const cost = 1;\n      if (!this.upgradeService.spendCredits(cost)) {\n        this.labError.set(`Insufficient Credits. Requires ${cost} NC.`);\n        return;\n      }\n      this.labState.set('cross-referencing');\n      this.labError.set(null);\n      this.geminiService.crossReferenceEntity(this.selectedEntity()).then(result => {\n        this.crossReferenceResult.set(result);\n        this.audioService.playSuccessSound();\n      }).catch(() => this.labError.set('Database connection failed.')).finally(() => this.labState.set('idle'));\n    }\n    runEmotionalResonanceScan() {\n      const cost = 2;\n      if (!this.upgradeService.spendCredits(cost)) {\n        this.labError.set(`Insufficient Credits. Requires ${cost} NC.`);\n        return;\n      }\n      this.labState.set('scanning-resonance');\n      this.labError.set(null);\n      this.geminiService.getEmotionalResonance(this.selectedEntity()).then(result => {\n        this.emotionalResonanceResult.set(result);\n        this.audioService.playSuccessSound();\n      }).catch(() => this.labError.set('Resonance scan failed.')).finally(() => this.labState.set('idle'));\n    }\n    runContainmentRitual() {\n      const cost = 10;\n      const entity = this.selectedEntity();\n      if (!entity) return;\n      if (!this.upgradeService.spendCredits(cost)) {\n        this.labError.set(`Insufficient Credits. Requires ${cost} NC.`);\n        return;\n      }\n      this.labState.set('containing');\n      this.labError.set(null);\n      this.geminiService.getContainmentRitual(entity).then(result => {\n        this.containmentResult.set(result);\n        this.containEntity.emit(entity);\n        this.audioService.playContainSound();\n      }).catch(() => this.labError.set('Containment ritual failed. Energy field unstable.')).finally(() => this.labState.set('idle'));\n    }\n    getEntryClass(entity) {\n      if (entity.contained) {\n        return 'border-blue-400/80';\n      }\n      if (entity.emfReading > 98) return 'border-red-500/50';\n      if (entity.emfReading > 95) return 'border-yellow-500/50';\n      if (entity.emfReading > 90) return 'border-teal-400/50';\n      return 'border-[var(--color-primary-500)]/50';\n    }\n    static #_ = _staticBlock = () => (this.ɵfac = function LogbookComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || LogbookComponent)();\n    }, this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: LogbookComponent,\n      selectors: [[\"app-logbook\"]],\n      inputs: {\n        detections: \"detections\",\n        isLoading: \"isLoading\",\n        error: \"error\"\n      },\n      outputs: {\n        containEntity: \"containEntity\"\n      },\n      decls: 7,\n      vars: 1,\n      consts: [[1, \"flex\", \"flex-col\", \"h-full\", \"text-white\"], [1, \"text-2xl\", \"font-bold\", \"text-[var(--color-primary-400)]\", \"mb-4\", \"border-b-2\", \"border-[var(--color-primary-700)]/50\", \"pb-2\"], [1, \"flex\", \"flex-col\", \"items-center\", \"justify-center\", \"flex-grow\", \"text-center\", \"p-4\", \"bg-[var(--color-surface)]/50\", \"rounded-lg\", \"animate-pulse\"], [1, \"flex\", \"flex-col\", \"items-center\", \"justify-center\", \"flex-grow\", \"text-center\", \"p-4\", \"bg-red-900/40\", \"rounded-lg\", \"border-2\", \"border-red-500/60\"], [1, \"flex\", \"flex-col\", \"items-center\", \"justify-center\", \"flex-grow\", \"text-center\", \"p-4\", \"bg-[var(--color-surface)]/50\", \"rounded-lg\"], [1, \"space-y-4\", \"overflow-y-auto\", \"pr-2\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"fill\", \"none\", \"viewBox\", \"0 0 24 24\", \"stroke-width\", \"1.5\", \"stroke\", \"currentColor\", 1, \"w-16\", \"h-16\", \"text-[var(--color-primary-500)]\", \"mb-4\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"d\", \"M12 9.75v6.75m0 0l-3-3m3 3l3-3m-8.25 6a4.5 4.5 0 01-1.41-8.775 5.25 5.25 0 0110.233-2.33 3 3 0 013.758 3.848A3.752 3.752 0 0118 19.5H6.75z\"], [1, \"text-xl\", \"text-[var(--color-primary-300)]\"], [1, \"text-md\", \"text-gray-400\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"fill\", \"none\", \"viewBox\", \"0 0 24 24\", \"stroke-width\", \"1.5\", \"stroke\", \"currentColor\", 1, \"w-16\", \"h-16\", \"text-red-400\", \"mb-4\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"d\", \"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z\"], [1, \"text-xl\", \"text-red-300\"], [1, \"text-md\", \"text-gray-300\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"fill\", \"none\", \"viewBox\", \"0 0 24 24\", \"stroke-width\", \"1.5\", \"stroke\", \"currentColor\", 1, \"w-16\", \"h-16\", \"text-gray-600\", \"mb-4\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"d\", \"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z\"], [1, \"text-xl\", \"text-gray-400\"], [1, \"text-md\", \"text-gray-500\"], [1, \"rounded-lg\", \"bg-[var(--color-surface)]\", \"border-l-4\", \"transition-all\", \"duration-300\", \"hover:shadow-lg\", \"hover:shadow-[var(--color-primary-800)]/30\", 3, \"class\"], [1, \"rounded-lg\", \"bg-[var(--color-surface)]\", \"border-l-4\", \"transition-all\", \"duration-300\", \"hover:shadow-lg\", \"hover:shadow-[var(--color-primary-800)]/30\"], [1, \"w-full\", \"text-left\", \"p-4\", 3, \"click\"], [1, \"flex\", \"justify-between\", \"items-start\"], [1, \"flex\", \"items-start\", \"gap-4\"], [\"alt\", \"Entity Glyph\", 1, \"w-16\", \"h-16\", \"rounded-md\", \"bg-black\", \"border-2\", \"border-[var(--color-primary-700)]/50\", 3, \"src\"], [1, \"font-bold\", \"text-xl\"], [1, \"text-sm\", \"font-normal\", \"text-blue-400\", \"ml-2\"], [1, \"text-right\", \"flex-shrink-0\"], [1, \"font-mono\", \"text-xl\", \"text-[var(--color-primary-400)]\"], [1, \"text-sm\", \"text-gray-500\"], [1, \"mt-3\"], [1, \"grid\", \"transition-all\", \"duration-500\", \"ease-in-out\"], [1, \"overflow-hidden\"], [1, \"p-4\", \"bg-black/40\", \"border-t-2\", \"border-[var(--color-primary-900)]/70\", \"space-y-4\"], [1, \"text-xl\", \"font-bold\", \"text-[var(--color-primary-300)]\", \"mb-2\"], [1, \"text-md\", \"text-gray-300\", \"leading-relaxed\", \"border-l-4\", \"border-[var(--color-primary-700)]/50\", \"pl-4\"], [1, \"text-red-400\", \"text-center\", \"text-md\", \"p-3\", \"bg-red-900/50\", \"rounded-md\", \"border\", \"border-red-700\"], [1, \"space-y-3\"], [1, \"bg-[var(--color-surface-light)]/50\", \"p-3\", \"rounded-md\", \"border\", \"border-gray-700\"], [1, \"flex\", \"justify-between\", \"items-center\"], [1, \"flex\", \"justify-between\", \"items-center\", \"mb-1\"], [1, \"text-sm\", \"text-red-400\", \"uppercase\", \"font-bold\"], [1, \"font-mono\", \"text-red-400\"], [1, \"w-full\", \"bg-black/50\", \"rounded-full\", \"h-2\", \"border\", \"border-gray-700\"], [1, \"bg-red-600\", \"h-full\", \"rounded-full\"], [1, \"font-bold\", \"text-[var(--color-primary-400)]\"], [1, \"text-md\", \"mt-1\"], [1, \"text-sm\", \"text-gray-400\"], [1, \"font-bold\", \"py-2\", \"px-4\", \"rounded-md\", \"bg-[var(--color-primary-700)]\", \"hover:bg-[var(--color-primary-600)]\", \"disabled:bg-gray-600\", \"disabled:text-gray-400\", \"transition-colors\", \"text-white\", \"text-sm\", 3, \"click\", \"disabled\"], [1, \"animate-pulse\"], [1, \"flex\", \"flex-wrap\", \"gap-2\", \"mt-2\"], [1, \"text-sm\", \"font-bold\", \"bg-teal-800/70\", \"text-teal-200\", \"px-3\", \"py-1\", \"rounded-full\"], [1, \"text-md\", \"mt-2\", \"text-gray-300\"], [1, \"font-bold\", \"text-blue-400\"], [1, \"text-md\", \"mt-2\", \"text-gray-300\", \"list-decimal\", \"list-inside\", \"space-y-1\"], [1, \"text-md\", \"mt-2\", \"text-blue-300\", \"font-semibold\"], [1, \"font-bold\", \"py-2\", \"px-4\", \"rounded-md\", \"bg-blue-700\", \"hover:bg-blue-600\", \"disabled:bg-gray-600\", \"disabled:text-gray-400\", \"transition-colors\", \"text-white\", \"text-sm\", 3, \"click\", \"disabled\"]],\n      template: function LogbookComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵdomElementStart(0, \"div\", 0)(1, \"h2\", 1);\n          i0.ɵɵtext(2, \"Entity Logbook\");\n          i0.ɵɵdomElementEnd();\n          i0.ɵɵconditionalCreate(3, LogbookComponent_Conditional_3_Template, 7, 0, \"div\", 2)(4, LogbookComponent_Conditional_4_Template, 7, 1, \"div\", 3)(5, LogbookComponent_Conditional_5_Template, 7, 0, \"div\", 4)(6, LogbookComponent_Conditional_6_Template, 3, 0, \"div\", 5);\n          i0.ɵɵdomElementEnd();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(3);\n          i0.ɵɵconditional(ctx.isLoading ? 3 : ctx.error ? 4 : ctx.detections.length === 0 ? 5 : 6);\n        }\n      },\n      dependencies: [CommonModule, i1.DatePipe],\n      encapsulation: 2,\n      changeDetection: 0\n    }));\n  }\n  _staticBlock();\n  return LogbookComponent;\n})();","map":{"version":3,"names":["EventEmitter","signal","inject","CommonModule","UpgradeService","GeminiService","AudioService","i0","ɵɵdomElementStart","ɵɵdomElement","ɵɵdomElementEnd","ɵɵtext","ɵɵadvance","ɵɵtextInterpolate","ctx_r0","error","ɵɵtextInterpolate1","entity_r3","instability","ɵɵstyleProp","labError","ɵɵclassProp","result_r4","match","details","ɵɵdomListener","LogbookComponent_Conditional_6_For_2_Conditional_30_Template_button_click_6_listener","ɵɵrestoreView","_r5","ɵɵnextContext","ɵɵresetView","runCrossReference","ɵɵconditionalCreate","LogbookComponent_Conditional_6_For_2_Conditional_30_Conditional_7_Template","LogbookComponent_Conditional_6_For_2_Conditional_30_Conditional_8_Template","ɵɵdomProperty","labState","ɵɵconditional","emotion_r6","ɵɵrepeaterCreate","LogbookComponent_Conditional_6_For_2_Conditional_32_For_5_Template","ɵɵrepeaterTrackByIdentity","ɵɵrepeater","result_r7","emotions","summary","LogbookComponent_Conditional_6_For_2_Conditional_33_Template_button_click_6_listener","_r8","runEmotionalResonanceScan","LogbookComponent_Conditional_6_For_2_Conditional_33_Conditional_7_Template","LogbookComponent_Conditional_6_For_2_Conditional_33_Conditional_8_Template","step_r9","LogbookComponent_Conditional_6_For_2_Conditional_35_For_5_Template","result_r10","steps","outcome","LogbookComponent_Conditional_6_For_2_Conditional_36_Template_button_click_6_listener","_r11","runContainmentRitual","LogbookComponent_Conditional_6_For_2_Conditional_36_Conditional_7_Template","LogbookComponent_Conditional_6_For_2_Conditional_36_Conditional_8_Template","contained","LogbookComponent_Conditional_6_For_2_Template_button_click_1_listener","_r2","$implicit","selectEntity","LogbookComponent_Conditional_6_For_2_Conditional_8_Template","LogbookComponent_Conditional_6_For_2_Conditional_17_Template","LogbookComponent_Conditional_6_For_2_Conditional_26_Template","LogbookComponent_Conditional_6_For_2_Conditional_29_Template","LogbookComponent_Conditional_6_For_2_Conditional_30_Template","LogbookComponent_Conditional_6_For_2_Conditional_32_Template","LogbookComponent_Conditional_6_For_2_Conditional_33_Template","LogbookComponent_Conditional_6_For_2_Conditional_35_Template","LogbookComponent_Conditional_6_For_2_Conditional_36_Template","ɵɵclassMap","getEntryClass","glyphB64","ɵɵsanitizeUrl","name","type","emfReading","toFixed","ɵɵpipeBind2","timestamp","tmp_21_0","selectedEntity","id","tmp_22_0","backstory","tmp_25_0","crossReferenceResult","tmp_26_0","emotionalResonanceResult","tmp_27_0","containmentResult","LogbookComponent_Conditional_6_For_2_Template","_forTrack0","detections","LogbookComponent","_staticBlock","constructor","isLoading","containEntity","ngDevMode","debugName","upgradeService","geminiService","audioService","entity","set","cost","spendCredits","crossReferenceEntity","then","result","playSuccessSound","catch","finally","getEmotionalResonance","getContainmentRitual","emit","playContainSound","_","selectors","inputs","outputs","decls","vars","consts","template","LogbookComponent_Template","rf","ctx","LogbookComponent_Conditional_3_Template","LogbookComponent_Conditional_4_Template","LogbookComponent_Conditional_5_Template","LogbookComponent_Conditional_6_Template","length","i1","DatePipe","encapsulation","changeDetection"],"sources":["C:\\Users\\grand\\necrometer_-ghost-detector-1\\src\\components\\logbook\\logbook.component.ts","C:\\Users\\grand\\necrometer_-ghost-detector-1\\src\\components\\logbook\\logbook.component.html"],"sourcesContent":["import { Component, ChangeDetectionStrategy, Input, Output, EventEmitter, signal, inject } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { DetectedEntity, CrossReferenceResult, EmotionalResonanceResult, ContainmentRitual } from '../../types';\r\nimport { UpgradeService } from '../../services/upgrade.service';\r\nimport { GeminiService } from '../../services/gemini.service';\r\nimport { AudioService } from '../../services/audio.service';\r\n\r\ntype LabState = 'idle' | 'cross-referencing' | 'scanning-resonance' | 'containing';\r\n\r\n@Component({\r\n  selector: 'app-logbook',\r\n  imports: [CommonModule],\r\n  templateUrl: './logbook.component.html',\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n})\r\nexport class LogbookComponent {\r\n  @Input() detections: DetectedEntity[] = [];\r\n  @Input() isLoading: boolean = false;\r\n  @Input() error: string | null = null;\r\n  @Output() containEntity = new EventEmitter<DetectedEntity>();\r\n\r\n  selectedEntity = signal<DetectedEntity | null>(null);\r\n  labState = signal<LabState>('idle');\r\n  labError = signal<string | null>(null);\r\n  \r\n  crossReferenceResult = signal<CrossReferenceResult | null>(null);\r\n  emotionalResonanceResult = signal<EmotionalResonanceResult | null>(null);\r\n  containmentResult = signal<ContainmentRitual | null>(null);\r\n\r\n  private upgradeService = inject(UpgradeService);\r\n  private geminiService = inject(GeminiService);\r\n  private audioService = inject(AudioService);\r\n\r\n  selectEntity(entity: DetectedEntity) {\r\n    if (this.selectedEntity()?.id === entity.id) {\r\n      this.selectedEntity.set(null); // Toggle off\r\n    } else {\r\n      this.selectedEntity.set(entity);\r\n      // Reset lab state when a new entity is selected\r\n      this.labError.set(null);\r\n      this.crossReferenceResult.set(null);\r\n      this.emotionalResonanceResult.set(null);\r\n      this.containmentResult.set(null);\r\n      this.labState.set('idle');\r\n    }\r\n  }\r\n\r\n  runCrossReference() {\r\n    const cost = 1;\r\n    if (!this.upgradeService.spendCredits(cost)) {\r\n      this.labError.set(`Insufficient Credits. Requires ${cost} NC.`);\r\n      return;\r\n    }\r\n    this.labState.set('cross-referencing');\r\n    this.labError.set(null);\r\n    this.geminiService.crossReferenceEntity(this.selectedEntity()!)\r\n      .then(result => {\r\n        this.crossReferenceResult.set(result);\r\n        this.audioService.playSuccessSound();\r\n      })\r\n      .catch(() => this.labError.set('Database connection failed.'))\r\n      .finally(() => this.labState.set('idle'));\r\n  }\r\n\r\n  runEmotionalResonanceScan() {\r\n    const cost = 2;\r\n     if (!this.upgradeService.spendCredits(cost)) {\r\n      this.labError.set(`Insufficient Credits. Requires ${cost} NC.`);\r\n      return;\r\n    }\r\n    this.labState.set('scanning-resonance');\r\n    this.labError.set(null);\r\n    this.geminiService.getEmotionalResonance(this.selectedEntity()!)\r\n      .then(result => {\r\n        this.emotionalResonanceResult.set(result);\r\n        this.audioService.playSuccessSound();\r\n      })\r\n      .catch(() => this.labError.set('Resonance scan failed.'))\r\n      .finally(() => this.labState.set('idle'));\r\n  }\r\n  \r\n  runContainmentRitual() {\r\n    const cost = 10;\r\n    const entity = this.selectedEntity();\r\n    if (!entity) return;\r\n\r\n    if (!this.upgradeService.spendCredits(cost)) {\r\n      this.labError.set(`Insufficient Credits. Requires ${cost} NC.`);\r\n      return;\r\n    }\r\n    this.labState.set('containing');\r\n    this.labError.set(null);\r\n    this.geminiService.getContainmentRitual(entity)\r\n      .then(result => {\r\n        this.containmentResult.set(result);\r\n        this.containEntity.emit(entity);\r\n        this.audioService.playContainSound();\r\n      })\r\n      .catch(() => this.labError.set('Containment ritual failed. Energy field unstable.'))\r\n      .finally(() => this.labState.set('idle'));\r\n  }\r\n\r\n  getEntryClass(entity: DetectedEntity): string {\r\n    if (entity.contained) {\r\n      return 'border-blue-400/80';\r\n    }\r\n    if (entity.emfReading > 98) return 'border-red-500/50';\r\n    if (entity.emfReading > 95) return 'border-yellow-500/50';\r\n    if (entity.emfReading > 90) return 'border-teal-400/50';\r\n    return 'border-[var(--color-primary-500)]/50';\r\n  }\r\n}","<div class=\"flex flex-col h-full text-white\">\r\n  <h2 class=\"text-2xl font-bold text-[var(--color-primary-400)] mb-4 border-b-2 border-[var(--color-primary-700)]/50 pb-2\">Entity Logbook</h2>\r\n\r\n  @if (isLoading) {\r\n    <div class=\"flex flex-col items-center justify-center flex-grow text-center p-4 bg-[var(--color-surface)]/50 rounded-lg animate-pulse\">\r\n      <svg class=\"w-16 h-16 text-[var(--color-primary-500)] mb-4\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M12 9.75v6.75m0 0l-3-3m3 3l3-3m-8.25 6a4.5 4.5 0 01-1.41-8.775 5.25 5.25 0 0110.233-2.33 3 3 0 013.758 3.848A3.752 3.752 0 0118 19.5H6.75z\" /></svg>\r\n      <p class=\"text-xl text-[var(--color-primary-300)]\">Analyzing Spectral Data...</p>\r\n      <p class=\"text-md text-gray-400\">Connecting to the other side.</p>\r\n    </div>\r\n  } @else if (error) {\r\n    <div class=\"flex flex-col items-center justify-center flex-grow text-center p-4 bg-red-900/40 rounded-lg border-2 border-red-500/60\">\r\n      <svg class=\"w-16 h-16 text-red-400 mb-4\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z\" /></svg>\r\n      <p class=\"text-xl text-red-300\">Analysis Failed</p>\r\n      <p class=\"text-md text-gray-300\">{{ error() }}</p>\r\n    </div>\r\n  } @else if (detections.length === 0) {\r\n    <div class=\"flex flex-col items-center justify-center flex-grow text-center p-4 bg-[var(--color-surface)]/50 rounded-lg\">\r\n      <svg class=\"w-16 h-16 text-gray-600 mb-4\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z\" /></svg>\r\n      <p class=\"text-xl text-gray-400\">No entities logged.</p>\r\n      <p class=\"text-md text-gray-500\">Return to the scanner to find activity.</p>\r\n    </div>\r\n  } @else {\r\n    <div class=\"space-y-4 overflow-y-auto pr-2\">\r\n      @for (entity of detections; track entity.id) {\r\n        <div class=\"rounded-lg bg-[var(--color-surface)] border-l-4 transition-all duration-300 hover:shadow-lg hover:shadow-[var(--color-primary-800)]/30\" [class]=\"getEntryClass(entity)\">\r\n          <!-- Main Entry Info -->\r\n          <button class=\"w-full text-left p-4\" (click)=\"selectEntity(entity)\">\r\n            <div class=\"flex justify-between items-start\">\r\n              <div class=\"flex items-start gap-4\">\r\n                <img [src]=\"'data:image/png;base64,' + entity.glyphB64\" alt=\"Entity Glyph\" class=\"w-16 h-16 rounded-md bg-black border-2 border-[var(--color-primary-700)]/50\" />\r\n                <div>\r\n                  <p class=\"font-bold text-xl\" [class.text-[var(--color-primary-300)]]=\"!entity.contained\" [class.text-blue-400]=\"entity.contained\">\r\n                    {{ entity.name }}\r\n                    @if(entity.contained) { <span class=\"text-sm font-normal text-blue-400 ml-2\">[CONTAINED]</span> }\r\n                  </p>\r\n                  <p class=\"text-md text-gray-400\">{{ entity.type }}</p>\r\n                </div>\r\n              </div>\r\n              <div class=\"text-right flex-shrink-0\">\r\n                <p class=\"font-mono text-xl text-[var(--color-primary-400)]\">{{ entity.emfReading.toFixed(2) }} µT</p>\r\n                <p class=\"text-sm text-gray-500\">{{ entity.timestamp | date:'short' }}</p>\r\n              </div>\r\n            </div>\r\n            @if(!entity.contained) {\r\n              <div class=\"mt-3\">\r\n                <div class=\"flex justify-between items-center mb-1\">\r\n                  <p class=\"text-sm text-red-400 uppercase font-bold\">Instability</p>\r\n                  <p class=\"font-mono text-red-400\">{{ entity.instability }}%</p>\r\n                </div>\r\n                <div class=\"w-full bg-black/50 rounded-full h-2 border border-gray-700\">\r\n                  <div class=\"bg-red-600 h-full rounded-full\" [style.width.%]=\"entity.instability\"></div>\r\n                </div>\r\n              </div>\r\n            }\r\n          </button>\r\n\r\n          <!-- Collapsible Analysis Lab -->\r\n          <div class=\"grid transition-all duration-500 ease-in-out\" [class.grid-rows-[1fr]]=\"selectedEntity()?.id === entity.id\" [class.grid-rows-[0fr]]=\"selectedEntity()?.id !== entity.id\">\r\n            <div class=\"overflow-hidden\">\r\n              <div class=\"p-4 bg-black/40 border-t-2 border-[var(--color-primary-900)]/70 space-y-4\">\r\n                <div>\r\n                  <h3 class=\"text-xl font-bold text-[var(--color-primary-300)] mb-2\">Analysis Lab</h3>\r\n                  <p class=\"text-md text-gray-300 leading-relaxed border-l-4 border-[var(--color-primary-700)]/50 pl-4\">{{ entity.backstory }}</p>\r\n                </div>\r\n\r\n                @if(labError()) {\r\n                  <p class=\"text-red-400 text-center text-md p-3 bg-red-900/50 rounded-md border border-red-700\">{{ labError() }}</p>\r\n                }\r\n\r\n                  <!-- Analysis Modules -->\r\n                  <div class=\"space-y-3\">\r\n                    <!-- Cross-Reference -->\r\n                    <div class=\"bg-[var(--color-surface-light)]/50 p-3 rounded-md border border-gray-700\">\r\n                      @if (crossReferenceResult(); as result) {\r\n                        <div>\r\n                          <h4 class=\"font-bold text-[var(--color-primary-400)]\">Database Cross-Reference</h4>\r\n                          <p class=\"text-md mt-1\" [class.text-gray-300]=\"result.match\" [class.text-yellow-400]=\"!result.match\">{{ result.details }}</p>\r\n                        </div>\r\n                      } @else {\r\n                        <div class=\"flex justify-between items-center\">\r\n                          <div>\r\n                            <h4 class=\"font-bold text-[var(--color-primary-400)]\">Cross-Reference</h4>\r\n                            <p class=\"text-sm text-gray-400\">Check against global database.</p>\r\n                          </div>\r\n                          <button [disabled]=\"labState() !== 'idle'\" (click)=\"runCrossReference()\" class=\"font-bold py-2 px-4 rounded-md bg-[var(--color-primary-700)] hover:bg-[var(--color-primary-600)] disabled:bg-gray-600 disabled:text-gray-400 transition-colors text-white text-sm\">\r\n                            @if (labState() === 'cross-referencing') { <span class=\"animate-pulse\">Checking...</span> } @else { <span>1 NC</span> }\r\n                          </button>\r\n                        </div>\r\n                      }\r\n                    </div>\r\n                    <!-- Emotional Resonance -->\r\n                    <div class=\"bg-[var(--color-surface-light)]/50 p-3 rounded-md border border-gray-700\">\r\n                      @if (emotionalResonanceResult(); as result) {\r\n                        <div>\r\n                          <h4 class=\"font-bold text-[var(--color-primary-400)]\">Emotional Resonance</h4>\r\n                          <div class=\"flex flex-wrap gap-2 mt-2\">\r\n                            @for(emotion of result.emotions; track emotion) {\r\n                              <span class=\"text-sm font-bold bg-teal-800/70 text-teal-200 px-3 py-1 rounded-full\">{{ emotion }}</span>\r\n                            }\r\n                          </div>\r\n                          <p class=\"text-md mt-2 text-gray-300\">{{ result.summary }}</p>\r\n                        </div>\r\n                      } @else {\r\n                        <div class=\"flex justify-between items-center\">\r\n                          <div>\r\n                            <h4 class=\"font-bold text-[var(--color-primary-400)]\">Resonance Scan</h4>\r\n                            <p class=\"text-sm text-gray-400\">Analyze emotional signature.</p>\r\n                          </div>\r\n                          <button [disabled]=\"labState() !== 'idle'\" (click)=\"runEmotionalResonanceScan()\" class=\"font-bold py-2 px-4 rounded-md bg-[var(--color-primary-700)] hover:bg-[var(--color-primary-600)] disabled:bg-gray-600 disabled:text-gray-400 transition-colors text-white text-sm\">\r\n                            @if (labState() === 'scanning-resonance') { <span class=\"animate-pulse\">Scanning...</span> } @else { <span>2 NC</span> }\r\n                          </button>\r\n                        </div>\r\n                      }\r\n                    </div>\r\n                    <!-- Containment Ritual -->\r\n                    <div class=\"bg-[var(--color-surface-light)]/50 p-3 rounded-md border border-gray-700\">\r\n                      @if (containmentResult(); as result) {\r\n                        <div>\r\n                          <h4 class=\"font-bold text-blue-400\">Containment Ritual Successful</h4>\r\n                          <ol class=\"text-md mt-2 text-gray-300 list-decimal list-inside space-y-1\">\r\n                            @for(step of result.steps; track step) { <li>{{ step }}</li> }\r\n                          </ol>\r\n                          <p class=\"text-md mt-2 text-blue-300 font-semibold\">{{ result.outcome }}</p>\r\n                        </div>\r\n                      } @else {\r\n                        <div class=\"flex justify-between items-center\">\r\n                          <div>\r\n                            <h4 class=\"font-bold text-blue-400\">Containment Ritual</h4>\r\n                            <p class=\"text-sm text-gray-400\">Stabilize and contain the entity.</p>\r\n                          </div>\r\n                          <button [disabled]=\"labState() !== 'idle' || entity.contained\" (click)=\"runContainmentRitual()\" class=\"font-bold py-2 px-4 rounded-md bg-blue-700 hover:bg-blue-600 disabled:bg-gray-600 disabled:text-gray-400 transition-colors text-white text-sm\">\r\n                            @if (labState() === 'containing') { <span class=\"animate-pulse\">Containing...</span> } @else { <span>10 NC</span> }\r\n                          </button>\r\n                        </div>\r\n                      }\r\n                    </div>\r\n                  </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      }\r\n    </div>\r\n  }\r\n</div>\r\n"],"mappings":"AAAA,SAA4DA,YAAY,EAAEC,MAAM,EAAEC,MAAM,QAAQ,eAAe;AAC/G,SAASC,YAAY,QAAQ,iBAAiB;AAE9C,SAASC,cAAc,QAAQ,gCAAgC;AAC/D,SAASC,aAAa,QAAQ,+BAA+B;AAC7D,SAASC,YAAY,QAAQ,8BAA8B;;;;;;ICDvDC,EAAA,CAAAC,iBAAA,aAAuI;;IACrID,EAAA,CAAAC,iBAAA,aAAwK;IAAAD,EAAA,CAAAE,YAAA,cAAsM;IAAAF,EAAA,CAAAG,eAAA,EAAM;;IACpXH,EAAA,CAAAC,iBAAA,WAAmD;IAAAD,EAAA,CAAAI,MAAA,iCAA0B;IAAAJ,EAAA,CAAAG,eAAA,EAAI;IACjFH,EAAA,CAAAC,iBAAA,WAAiC;IAAAD,EAAA,CAAAI,MAAA,oCAA6B;IAChEJ,EADgE,CAAAG,eAAA,EAAI,EAC9D;;;;;IAENH,EAAA,CAAAC,iBAAA,aAAqI;;IACnID,EAAA,CAAAC,iBAAA,cAAqJ;IAAAD,EAAA,CAAAE,YAAA,eAA4O;IAAAF,EAAA,CAAAG,eAAA,EAAM;;IACvYH,EAAA,CAAAC,iBAAA,YAAgC;IAAAD,EAAA,CAAAI,MAAA,sBAAe;IAAAJ,EAAA,CAAAG,eAAA,EAAI;IACnDH,EAAA,CAAAC,iBAAA,YAAiC;IAAAD,EAAA,CAAAI,MAAA,GAAa;IAChDJ,EADgD,CAAAG,eAAA,EAAI,EAC9C;;;;IAD6BH,EAAA,CAAAK,SAAA,GAAa;IAAbL,EAAA,CAAAM,iBAAA,CAAAC,MAAA,CAAAC,KAAA,GAAa;;;;;IAGhDR,EAAA,CAAAC,iBAAA,aAAyH;;IACvHD,EAAA,CAAAC,iBAAA,cAAsJ;IAAAD,EAAA,CAAAE,YAAA,eAAgQ;IAAAF,EAAA,CAAAG,eAAA,EAAM;;IAC5ZH,EAAA,CAAAC,iBAAA,YAAiC;IAAAD,EAAA,CAAAI,MAAA,0BAAmB;IAAAJ,EAAA,CAAAG,eAAA,EAAI;IACxDH,EAAA,CAAAC,iBAAA,YAAiC;IAAAD,EAAA,CAAAI,MAAA,8CAAuC;IAC1EJ,EAD0E,CAAAG,eAAA,EAAI,EACxE;;;;;IAakCH,EAAA,CAAAC,iBAAA,eAAqD;IAAAD,EAAA,CAAAI,MAAA,kBAAW;IAAAJ,EAAA,CAAAG,eAAA,EAAO;;;;;IAajGH,EAFJ,CAAAC,iBAAA,cAAkB,cACoC,YACE;IAAAD,EAAA,CAAAI,MAAA,kBAAW;IAAAJ,EAAA,CAAAG,eAAA,EAAI;IACnEH,EAAA,CAAAC,iBAAA,YAAkC;IAAAD,EAAA,CAAAI,MAAA,GAAyB;IAC7DJ,EAD6D,CAAAG,eAAA,EAAI,EAC3D;IACNH,EAAA,CAAAC,iBAAA,cAAwE;IACtED,EAAA,CAAAE,YAAA,cAAuF;IAE3FF,EADE,CAAAG,eAAA,EAAM,EACF;;;;IALgCH,EAAA,CAAAK,SAAA,GAAyB;IAAzBL,EAAA,CAAAS,kBAAA,KAAAC,SAAA,CAAAC,WAAA,MAAyB;IAGfX,EAAA,CAAAK,SAAA,GAAoC;IAApCL,EAAA,CAAAY,WAAA,UAAAF,SAAA,CAAAC,WAAA,MAAoC;;;;;IAgBhFX,EAAA,CAAAC,iBAAA,YAA+F;IAAAD,EAAA,CAAAI,MAAA,GAAgB;IAAAJ,EAAA,CAAAG,eAAA,EAAI;;;;IAApBH,EAAA,CAAAK,SAAA,EAAgB;IAAhBL,EAAA,CAAAM,iBAAA,CAAAC,MAAA,CAAAM,QAAA,GAAgB;;;;;IASvGb,EADF,CAAAC,iBAAA,UAAK,aACmD;IAAAD,EAAA,CAAAI,MAAA,+BAAwB;IAAAJ,EAAA,CAAAG,eAAA,EAAK;IACnFH,EAAA,CAAAC,iBAAA,YAAqG;IAAAD,EAAA,CAAAI,MAAA,GAAoB;IAC3HJ,EAD2H,CAAAG,eAAA,EAAI,EACzH;;;;IADoBH,EAAA,CAAAK,SAAA,GAAoC;IAACL,EAArC,CAAAc,WAAA,kBAAAC,SAAA,CAAAC,KAAA,CAAoC,qBAAAD,SAAA,CAAAC,KAAA,CAAwC;IAAChB,EAAA,CAAAK,SAAA,EAAoB;IAApBL,EAAA,CAAAM,iBAAA,CAAAS,SAAA,CAAAE,OAAA,CAAoB;;;;;IAS5EjB,EAAA,CAAAC,iBAAA,eAA4B;IAAAD,EAAA,CAAAI,MAAA,kBAAW;IAAAJ,EAAA,CAAAG,eAAA,EAAO;;;;;IAAWH,EAAA,CAAAC,iBAAA,WAAM;IAAAD,EAAA,CAAAI,MAAA,WAAI;IAAAJ,EAAA,CAAAG,eAAA,EAAO;;;;;;IAJrHH,EAFJ,CAAAC,iBAAA,cAA+C,UACxC,aACmD;IAAAD,EAAA,CAAAI,MAAA,sBAAe;IAAAJ,EAAA,CAAAG,eAAA,EAAK;IAC1EH,EAAA,CAAAC,iBAAA,YAAiC;IAAAD,EAAA,CAAAI,MAAA,qCAA8B;IACjEJ,EADiE,CAAAG,eAAA,EAAI,EAC/D;IACNH,EAAA,CAAAC,iBAAA,iBAAmQ;IAAxND,EAAA,CAAAkB,aAAA,mBAAAC,qFAAA;MAAAnB,EAAA,CAAAoB,aAAA,CAAAC,GAAA;MAAA,MAAAd,MAAA,GAAAP,EAAA,CAAAsB,aAAA;MAAA,OAAAtB,EAAA,CAAAuB,WAAA,CAAShB,MAAA,CAAAiB,iBAAA,EAAmB;IAAA,EAAC;IACsBxB,EAA5F,CAAAyB,mBAAA,IAAAC,0EAAA,mBAA0C,IAAAC,0EAAA,eAAyD;IAEvG3B,EADE,CAAAG,eAAA,EAAS,EACL;;;;IAHIH,EAAA,CAAAK,SAAA,GAAkC;IAAlCL,EAAA,CAAA4B,aAAA,aAAArB,MAAA,CAAAsB,QAAA,cAAkC;IACxC7B,EAAA,CAAAK,SAAA,EAAuH;IAAvHL,EAAA,CAAA8B,aAAA,CAAAvB,MAAA,CAAAsB,QAAA,mCAAuH;;;;;IAYrH7B,EAAA,CAAAC,iBAAA,eAAoF;IAAAD,EAAA,CAAAI,MAAA,GAAa;IAAAJ,EAAA,CAAAG,eAAA,EAAO;;;;IAApBH,EAAA,CAAAK,SAAA,EAAa;IAAbL,EAAA,CAAAM,iBAAA,CAAAyB,UAAA,CAAa;;;;;IAHrG/B,EADF,CAAAC,iBAAA,UAAK,aACmD;IAAAD,EAAA,CAAAI,MAAA,0BAAmB;IAAAJ,EAAA,CAAAG,eAAA,EAAK;IAC9EH,EAAA,CAAAC,iBAAA,cAAuC;IACrCD,EAAA,CAAAgC,gBAAA,IAAAC,kEAAA,oBAAAjC,EAAA,CAAAkC,yBAAA,CAEC;IACHlC,EAAA,CAAAG,eAAA,EAAM;IACNH,EAAA,CAAAC,iBAAA,YAAsC;IAAAD,EAAA,CAAAI,MAAA,GAAoB;IAC5DJ,EAD4D,CAAAG,eAAA,EAAI,EAC1D;;;;IALFH,EAAA,CAAAK,SAAA,GAEC;IAFDL,EAAA,CAAAmC,UAAA,CAAAC,SAAA,CAAAC,QAAA,CAEC;IAEmCrC,EAAA,CAAAK,SAAA,GAAoB;IAApBL,EAAA,CAAAM,iBAAA,CAAA8B,SAAA,CAAAE,OAAA,CAAoB;;;;;IASZtC,EAAA,CAAAC,iBAAA,eAA4B;IAAAD,EAAA,CAAAI,MAAA,kBAAW;IAAAJ,EAAA,CAAAG,eAAA,EAAO;;;;;IAAWH,EAAA,CAAAC,iBAAA,WAAM;IAAAD,EAAA,CAAAI,MAAA,WAAI;IAAAJ,EAAA,CAAAG,eAAA,EAAO;;;;;;IAJtHH,EAFJ,CAAAC,iBAAA,cAA+C,UACxC,aACmD;IAAAD,EAAA,CAAAI,MAAA,qBAAc;IAAAJ,EAAA,CAAAG,eAAA,EAAK;IACzEH,EAAA,CAAAC,iBAAA,YAAiC;IAAAD,EAAA,CAAAI,MAAA,mCAA4B;IAC/DJ,EAD+D,CAAAG,eAAA,EAAI,EAC7D;IACNH,EAAA,CAAAC,iBAAA,iBAA2Q;IAAhOD,EAAA,CAAAkB,aAAA,mBAAAqB,qFAAA;MAAAvC,EAAA,CAAAoB,aAAA,CAAAoB,GAAA;MAAA,MAAAjC,MAAA,GAAAP,EAAA,CAAAsB,aAAA;MAAA,OAAAtB,EAAA,CAAAuB,WAAA,CAAShB,MAAA,CAAAkC,yBAAA,EAA2B;IAAA,EAAC;IACezC,EAA7F,CAAAyB,mBAAA,IAAAiB,0EAAA,mBAA2C,IAAAC,0EAAA,eAAyD;IAExG3C,EADE,CAAAG,eAAA,EAAS,EACL;;;;IAHIH,EAAA,CAAAK,SAAA,GAAkC;IAAlCL,EAAA,CAAA4B,aAAA,aAAArB,MAAA,CAAAsB,QAAA,cAAkC;IACxC7B,EAAA,CAAAK,SAAA,EAAwH;IAAxHL,EAAA,CAAA8B,aAAA,CAAAvB,MAAA,CAAAsB,QAAA,oCAAwH;;;;;IAW/E7B,EAAA,CAAAC,iBAAA,SAAI;IAAAD,EAAA,CAAAI,MAAA,GAAU;IAAAJ,EAAA,CAAAG,eAAA,EAAK;;;;IAAfH,EAAA,CAAAK,SAAA,EAAU;IAAVL,EAAA,CAAAM,iBAAA,CAAAsC,OAAA,CAAU;;;;;IAFzD5C,EADF,CAAAC,iBAAA,UAAK,aACiC;IAAAD,EAAA,CAAAI,MAAA,oCAA6B;IAAAJ,EAAA,CAAAG,eAAA,EAAK;IACtEH,EAAA,CAAAC,iBAAA,aAA0E;IACxED,EAAA,CAAAgC,gBAAA,IAAAa,kEAAA,oBAAA7C,EAAA,CAAAkC,yBAAA,CAA8D;IAChElC,EAAA,CAAAG,eAAA,EAAK;IACLH,EAAA,CAAAC,iBAAA,YAAoD;IAAAD,EAAA,CAAAI,MAAA,GAAoB;IAC1EJ,EAD0E,CAAAG,eAAA,EAAI,EACxE;;;;IAHFH,EAAA,CAAAK,SAAA,GAA8D;IAA9DL,EAAA,CAAAmC,UAAA,CAAAW,UAAA,CAAAC,KAAA,CAA8D;IAEZ/C,EAAA,CAAAK,SAAA,GAAoB;IAApBL,EAAA,CAAAM,iBAAA,CAAAwC,UAAA,CAAAE,OAAA,CAAoB;;;;;IASlChD,EAAA,CAAAC,iBAAA,eAA4B;IAAAD,EAAA,CAAAI,MAAA,oBAAa;IAAAJ,EAAA,CAAAG,eAAA,EAAO;;;;;IAAWH,EAAA,CAAAC,iBAAA,WAAM;IAAAD,EAAA,CAAAI,MAAA,YAAK;IAAAJ,EAAA,CAAAG,eAAA,EAAO;;;;;;IAJjHH,EAFJ,CAAAC,iBAAA,cAA+C,UACxC,aACiC;IAAAD,EAAA,CAAAI,MAAA,yBAAkB;IAAAJ,EAAA,CAAAG,eAAA,EAAK;IAC3DH,EAAA,CAAAC,iBAAA,YAAiC;IAAAD,EAAA,CAAAI,MAAA,wCAAiC;IACpEJ,EADoE,CAAAG,eAAA,EAAI,EAClE;IACNH,EAAA,CAAAC,iBAAA,iBAAsP;IAAvLD,EAAA,CAAAkB,aAAA,mBAAA+B,qFAAA;MAAAjD,EAAA,CAAAoB,aAAA,CAAA8B,IAAA;MAAA,MAAA3C,MAAA,GAAAP,EAAA,CAAAsB,aAAA;MAAA,OAAAtB,EAAA,CAAAuB,WAAA,CAAShB,MAAA,CAAA4C,oBAAA,EAAsB;IAAA,EAAC;IACNnD,EAAvF,CAAAyB,mBAAA,IAAA2B,0EAAA,mBAAmC,IAAAC,0EAAA,eAA2D;IAElGrD,EADE,CAAAG,eAAA,EAAS,EACL;;;;;IAHIH,EAAA,CAAAK,SAAA,GAAsD;IAAtDL,EAAA,CAAA4B,aAAA,aAAArB,MAAA,CAAAsB,QAAA,iBAAAnB,SAAA,CAAA4C,SAAA,CAAsD;IAC5DtD,EAAA,CAAAK,SAAA,EAAmH;IAAnHL,EAAA,CAAA8B,aAAA,CAAAvB,MAAA,CAAAsB,QAAA,4BAAmH;;;;;;IAzGrI7B,EAFF,CAAAC,iBAAA,cAAoL,iBAE9G;IAA/BD,EAAA,CAAAkB,aAAA,mBAAAqC,sEAAA;MAAA,MAAA7C,SAAA,GAAAV,EAAA,CAAAoB,aAAA,CAAAoC,GAAA,EAAAC,SAAA;MAAA,MAAAlD,MAAA,GAAAP,EAAA,CAAAsB,aAAA;MAAA,OAAAtB,EAAA,CAAAuB,WAAA,CAAShB,MAAA,CAAAmD,YAAA,CAAAhD,SAAA,CAAoB;IAAA,EAAC;IAE/DV,EADF,CAAAC,iBAAA,cAA8C,cACR;IAClCD,EAAA,CAAAE,YAAA,cAAiK;IAE/JF,EADF,CAAAC,iBAAA,UAAK,YAC+H;IAChID,EAAA,CAAAI,MAAA,GACA;IAAAJ,EAAA,CAAAyB,mBAAA,IAAAkC,2DAAA,mBAAuB;IACzB3D,EAAA,CAAAG,eAAA,EAAI;IACJH,EAAA,CAAAC,iBAAA,WAAiC;IAAAD,EAAA,CAAAI,MAAA,IAAiB;IAEtDJ,EAFsD,CAAAG,eAAA,EAAI,EAClD,EACF;IAEJH,EADF,CAAAC,iBAAA,eAAsC,aACyB;IAAAD,EAAA,CAAAI,MAAA,IAAqC;IAAAJ,EAAA,CAAAG,eAAA,EAAI;IACtGH,EAAA,CAAAC,iBAAA,aAAiC;IAAAD,EAAA,CAAAI,MAAA,IAAqC;;IAE1EJ,EAF0E,CAAAG,eAAA,EAAI,EACtE,EACF;IACNH,EAAA,CAAAyB,mBAAA,KAAAmC,4DAAA,kBAAwB;IAW1B5D,EAAA,CAAAG,eAAA,EAAS;IAODH,EAJR,CAAAC,iBAAA,eAAoL,eACrJ,eAC4D,WAChF,cACgE;IAAAD,EAAA,CAAAI,MAAA,oBAAY;IAAAJ,EAAA,CAAAG,eAAA,EAAK;IACpFH,EAAA,CAAAC,iBAAA,aAAsG;IAAAD,EAAA,CAAAI,MAAA,IAAsB;IAC9HJ,EAD8H,CAAAG,eAAA,EAAI,EAC5H;IAENH,EAAA,CAAAyB,mBAAA,KAAAoC,4DAAA,gBAAiB;IAOb7D,EAFF,CAAAC,iBAAA,eAAuB,eAEiE;IAMlFD,EALF,CAAAyB,mBAAA,KAAAqC,4DAAA,cAAyC,KAAAC,4DAAA,kBAKhC;IAWX/D,EAAA,CAAAG,eAAA,EAAM;IAENH,EAAA,CAAAC,iBAAA,eAAsF;IAWlFD,EAVF,CAAAyB,mBAAA,KAAAuC,4DAAA,cAA6C,KAAAC,4DAAA,kBAUpC;IAWXjE,EAAA,CAAAG,eAAA,EAAM;IAENH,EAAA,CAAAC,iBAAA,eAAsF;IASlFD,EARF,CAAAyB,mBAAA,KAAAyC,4DAAA,cAAsC,KAAAC,4DAAA,kBAQ7B;IAgBvBnE,EALY,CAAAG,eAAA,EAAM,EACF,EACJ,EACF,EACF,EACF;;;;;;;;;;IApH8IH,EAAA,CAAAoE,UAAA,CAAA7D,MAAA,CAAA8D,aAAA,CAAA3D,SAAA,EAA+B;IAKtKV,EAAA,CAAAK,SAAA,GAAkD;IAAlDL,EAAA,CAAA4B,aAAA,mCAAAlB,SAAA,CAAA4D,QAAA,EAAAtE,EAAA,CAAAuE,aAAA,CAAkD;IAExBvE,EAAA,CAAAK,SAAA,GAA2D;IAACL,EAA5D,CAAAc,WAAA,qCAAAJ,SAAA,CAAA4C,SAAA,CAA2D,kBAAA5C,SAAA,CAAA4C,SAAA,CAAyC;IAC/HtD,EAAA,CAAAK,SAAA,EACA;IADAL,EAAA,CAAAS,kBAAA,MAAAC,SAAA,CAAA8D,IAAA,MACA;IAAAxE,EAAA,CAAAK,SAAA,EAAiG;IAAjGL,EAAA,CAAA8B,aAAA,CAAApB,SAAA,CAAA4C,SAAA,UAAiG;IAElEtD,EAAA,CAAAK,SAAA,GAAiB;IAAjBL,EAAA,CAAAM,iBAAA,CAAAI,SAAA,CAAA+D,IAAA,CAAiB;IAISzE,EAAA,CAAAK,SAAA,GAAqC;IAArCL,EAAA,CAAAS,kBAAA,KAAAC,SAAA,CAAAgE,UAAA,CAAAC,OAAA,gBAAqC;IACjE3E,EAAA,CAAAK,SAAA,GAAqC;IAArCL,EAAA,CAAAM,iBAAA,CAAAN,EAAA,CAAA4E,WAAA,SAAAlE,SAAA,CAAAmE,SAAA,WAAqC;IAG1E7E,EAAA,CAAAK,SAAA,GAUC;IAVDL,EAAA,CAAA8B,aAAA,EAAApB,SAAA,CAAA4C,SAAA,WAUC;IAIuDtD,EAAA,CAAAK,SAAA,EAA4D;IAACL,EAA7D,CAAAc,WAAA,sBAAAgE,QAAA,GAAAvE,MAAA,CAAAwE,cAAA,qBAAAD,QAAA,CAAAE,EAAA,MAAAtE,SAAA,CAAAsE,EAAA,CAA4D,sBAAAC,QAAA,GAAA1E,MAAA,CAAAwE,cAAA,qBAAAE,QAAA,CAAAD,EAAA,MAAAtE,SAAA,CAAAsE,EAAA,CAA6D;IAKrEhF,EAAA,CAAAK,SAAA,GAAsB;IAAtBL,EAAA,CAAAM,iBAAA,CAAAI,SAAA,CAAAwE,SAAA,CAAsB;IAG9HlF,EAAA,CAAAK,SAAA,EAEC;IAFDL,EAAA,CAAA8B,aAAA,CAAAvB,MAAA,CAAAM,QAAA,aAEC;IAMKb,EAAA,CAAAK,SAAA,GAeC;IAfDL,EAAA,CAAA8B,aAAA,EAAAqD,QAAA,GAAA5E,MAAA,CAAA6E,oBAAA,eAAAD,QAAA,CAeC;IAIDnF,EAAA,CAAAK,SAAA,GAoBC;IApBDL,EAAA,CAAA8B,aAAA,EAAAuD,QAAA,GAAA9E,MAAA,CAAA+E,wBAAA,eAAAD,QAAA,CAoBC;IAIDrF,EAAA,CAAAK,SAAA,GAkBC;IAlBDL,EAAA,CAAA8B,aAAA,EAAAyD,QAAA,GAAAhF,MAAA,CAAAiF,iBAAA,eAAAD,QAAA,CAkBC;;;;;IAhHnBvF,EAAA,CAAAC,iBAAA,aAA4C;IAC1CD,EAAA,CAAAgC,gBAAA,IAAAyD,6CAAA,qBAAAC,UAAA,CAsHC;IACH1F,EAAA,CAAAG,eAAA,EAAM;;;;IAvHJH,EAAA,CAAAK,SAAA,EAsHC;IAtHDL,EAAA,CAAAmC,UAAA,CAAA5B,MAAA,CAAAoF,UAAA,CAsHC;;;AD9HP,WAAaC,gBAAgB;EAAA,IAAAC,YAAA;EAAvB,MAAOD,gBAAgB;IAN7BE,YAAA;MAOW,KAAAH,UAAU,GAAqB,EAAE;MACjC,KAAAI,SAAS,GAAY,KAAK;MAC1B,KAAAvF,KAAK,GAAkB,IAAI;MAC1B,KAAAwF,aAAa,GAAG,IAAIvG,YAAY,EAAkB;MAE5D,KAAAsF,cAAc,GAAGrF,MAAM,CAAwB,IAAI,MAAAuG,SAAA;QAAAC,SAAA;MAAA,SAAC;MACpD,KAAArE,QAAQ,GAAGnC,MAAM,CAAW,MAAM,MAAAuG,SAAA;QAAAC,SAAA;MAAA,SAAC;MACnC,KAAArF,QAAQ,GAAGnB,MAAM,CAAgB,IAAI,MAAAuG,SAAA;QAAAC,SAAA;MAAA,SAAC;MAEtC,KAAAd,oBAAoB,GAAG1F,MAAM,CAA8B,IAAI,MAAAuG,SAAA;QAAAC,SAAA;MAAA,SAAC;MAChE,KAAAZ,wBAAwB,GAAG5F,MAAM,CAAkC,IAAI,MAAAuG,SAAA;QAAAC,SAAA;MAAA,SAAC;MACxE,KAAAV,iBAAiB,GAAG9F,MAAM,CAA2B,IAAI,MAAAuG,SAAA;QAAAC,SAAA;MAAA,SAAC;MAElD,KAAAC,cAAc,GAAGxG,MAAM,CAACE,cAAc,CAAC;MACvC,KAAAuG,aAAa,GAAGzG,MAAM,CAACG,aAAa,CAAC;MACrC,KAAAuG,YAAY,GAAG1G,MAAM,CAACI,YAAY,CAAC;;IAE3C2D,YAAYA,CAAC4C,MAAsB;MACjC,IAAI,IAAI,CAACvB,cAAc,EAAE,EAAEC,EAAE,KAAKsB,MAAM,CAACtB,EAAE,EAAE;QAC3C,IAAI,CAACD,cAAc,CAACwB,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC;MACjC,CAAC,MAAM;QACL,IAAI,CAACxB,cAAc,CAACwB,GAAG,CAACD,MAAM,CAAC;QAC/B;QACA,IAAI,CAACzF,QAAQ,CAAC0F,GAAG,CAAC,IAAI,CAAC;QACvB,IAAI,CAACnB,oBAAoB,CAACmB,GAAG,CAAC,IAAI,CAAC;QACnC,IAAI,CAACjB,wBAAwB,CAACiB,GAAG,CAAC,IAAI,CAAC;QACvC,IAAI,CAACf,iBAAiB,CAACe,GAAG,CAAC,IAAI,CAAC;QAChC,IAAI,CAAC1E,QAAQ,CAAC0E,GAAG,CAAC,MAAM,CAAC;MAC3B;IACF;IAEA/E,iBAAiBA,CAAA;MACf,MAAMgF,IAAI,GAAG,CAAC;MACd,IAAI,CAAC,IAAI,CAACL,cAAc,CAACM,YAAY,CAACD,IAAI,CAAC,EAAE;QAC3C,IAAI,CAAC3F,QAAQ,CAAC0F,GAAG,CAAC,kCAAkCC,IAAI,MAAM,CAAC;QAC/D;MACF;MACA,IAAI,CAAC3E,QAAQ,CAAC0E,GAAG,CAAC,mBAAmB,CAAC;MACtC,IAAI,CAAC1F,QAAQ,CAAC0F,GAAG,CAAC,IAAI,CAAC;MACvB,IAAI,CAACH,aAAa,CAACM,oBAAoB,CAAC,IAAI,CAAC3B,cAAc,EAAG,CAAC,CAC5D4B,IAAI,CAACC,MAAM,IAAG;QACb,IAAI,CAACxB,oBAAoB,CAACmB,GAAG,CAACK,MAAM,CAAC;QACrC,IAAI,CAACP,YAAY,CAACQ,gBAAgB,EAAE;MACtC,CAAC,CAAC,CACDC,KAAK,CAAC,MAAM,IAAI,CAACjG,QAAQ,CAAC0F,GAAG,CAAC,6BAA6B,CAAC,CAAC,CAC7DQ,OAAO,CAAC,MAAM,IAAI,CAAClF,QAAQ,CAAC0E,GAAG,CAAC,MAAM,CAAC,CAAC;IAC7C;IAEA9D,yBAAyBA,CAAA;MACvB,MAAM+D,IAAI,GAAG,CAAC;MACb,IAAI,CAAC,IAAI,CAACL,cAAc,CAACM,YAAY,CAACD,IAAI,CAAC,EAAE;QAC5C,IAAI,CAAC3F,QAAQ,CAAC0F,GAAG,CAAC,kCAAkCC,IAAI,MAAM,CAAC;QAC/D;MACF;MACA,IAAI,CAAC3E,QAAQ,CAAC0E,GAAG,CAAC,oBAAoB,CAAC;MACvC,IAAI,CAAC1F,QAAQ,CAAC0F,GAAG,CAAC,IAAI,CAAC;MACvB,IAAI,CAACH,aAAa,CAACY,qBAAqB,CAAC,IAAI,CAACjC,cAAc,EAAG,CAAC,CAC7D4B,IAAI,CAACC,MAAM,IAAG;QACb,IAAI,CAACtB,wBAAwB,CAACiB,GAAG,CAACK,MAAM,CAAC;QACzC,IAAI,CAACP,YAAY,CAACQ,gBAAgB,EAAE;MACtC,CAAC,CAAC,CACDC,KAAK,CAAC,MAAM,IAAI,CAACjG,QAAQ,CAAC0F,GAAG,CAAC,wBAAwB,CAAC,CAAC,CACxDQ,OAAO,CAAC,MAAM,IAAI,CAAClF,QAAQ,CAAC0E,GAAG,CAAC,MAAM,CAAC,CAAC;IAC7C;IAEApD,oBAAoBA,CAAA;MAClB,MAAMqD,IAAI,GAAG,EAAE;MACf,MAAMF,MAAM,GAAG,IAAI,CAACvB,cAAc,EAAE;MACpC,IAAI,CAACuB,MAAM,EAAE;MAEb,IAAI,CAAC,IAAI,CAACH,cAAc,CAACM,YAAY,CAACD,IAAI,CAAC,EAAE;QAC3C,IAAI,CAAC3F,QAAQ,CAAC0F,GAAG,CAAC,kCAAkCC,IAAI,MAAM,CAAC;QAC/D;MACF;MACA,IAAI,CAAC3E,QAAQ,CAAC0E,GAAG,CAAC,YAAY,CAAC;MAC/B,IAAI,CAAC1F,QAAQ,CAAC0F,GAAG,CAAC,IAAI,CAAC;MACvB,IAAI,CAACH,aAAa,CAACa,oBAAoB,CAACX,MAAM,CAAC,CAC5CK,IAAI,CAACC,MAAM,IAAG;QACb,IAAI,CAACpB,iBAAiB,CAACe,GAAG,CAACK,MAAM,CAAC;QAClC,IAAI,CAACZ,aAAa,CAACkB,IAAI,CAACZ,MAAM,CAAC;QAC/B,IAAI,CAACD,YAAY,CAACc,gBAAgB,EAAE;MACtC,CAAC,CAAC,CACDL,KAAK,CAAC,MAAM,IAAI,CAACjG,QAAQ,CAAC0F,GAAG,CAAC,mDAAmD,CAAC,CAAC,CACnFQ,OAAO,CAAC,MAAM,IAAI,CAAClF,QAAQ,CAAC0E,GAAG,CAAC,MAAM,CAAC,CAAC;IAC7C;IAEAlC,aAAaA,CAACiC,MAAsB;MAClC,IAAIA,MAAM,CAAChD,SAAS,EAAE;QACpB,OAAO,oBAAoB;MAC7B;MACA,IAAIgD,MAAM,CAAC5B,UAAU,GAAG,EAAE,EAAE,OAAO,mBAAmB;MACtD,IAAI4B,MAAM,CAAC5B,UAAU,GAAG,EAAE,EAAE,OAAO,sBAAsB;MACzD,IAAI4B,MAAM,CAAC5B,UAAU,GAAG,EAAE,EAAE,OAAO,oBAAoB;MACvD,OAAO,sCAAsC;IAC/C;IAAC,QAAA0C,CAAA,GAAAvB,YAAA,GAAAA,CAAA,M;uCA/FUD,gBAAgB;IAAA,G;YAAhBA,gBAAgB;MAAAyB,SAAA;MAAAC,MAAA;QAAA3B,UAAA;QAAAI,SAAA;QAAAvF,KAAA;MAAA;MAAA+G,OAAA;QAAAvB,aAAA;MAAA;MAAAwB,KAAA;MAAAC,IAAA;MAAAC,MAAA;MAAAC,QAAA,WAAAC,0BAAAC,EAAA,EAAAC,GAAA;QAAA,IAAAD,EAAA;UCd3B7H,EADF,CAAAC,iBAAA,aAA6C,YAC8E;UAAAD,EAAA,CAAAI,MAAA,qBAAc;UAAAJ,EAAA,CAAAG,eAAA,EAAK;UAoB1IH,EAlBF,CAAAyB,mBAAA,IAAAsG,uCAAA,iBAAiB,IAAAC,uCAAA,iBAMG,IAAAC,uCAAA,iBAMkB,IAAAC,uCAAA,iBAM7B;UA2HXlI,EAAA,CAAAG,eAAA,EAAM;;;UA7IJH,EAAA,CAAAK,SAAA,GA4IC;UA5IDL,EAAA,CAAA8B,aAAA,CAAAgG,GAAA,CAAA/B,SAAA,OAAA+B,GAAA,CAAAtH,KAAA,OAAAsH,GAAA,CAAAnC,UAAA,CAAAwC,MAAA,eA4IC;;;qBDpISvI,YAAY,EAAAwI,EAAA,CAAAC,QAAA;MAAAC,aAAA;MAAAC,eAAA;IAAA;;;SAIX3C,gBAAgB;AAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}