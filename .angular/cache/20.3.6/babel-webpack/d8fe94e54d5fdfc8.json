{"ast":null,"code":"import * as i0 from \"@angular/core\";\nconst DETECTIONS_STORAGE_KEY = 'necrometer_detections';\nexport let PersistenceService = /*#__PURE__*/(() => {\n  var _staticBlock;\n  class PersistenceService {\n    saveDetections(detections) {\n      try {\n        const data = JSON.stringify(detections);\n        localStorage.setItem(DETECTIONS_STORAGE_KEY, data);\n      } catch (error) {\n        console.error('Error saving detections to localStorage', error);\n      }\n    }\n    loadDetections() {\n      try {\n        const data = localStorage.getItem(DETECTIONS_STORAGE_KEY);\n        if (data) {\n          const detections = JSON.parse(data);\n          // Rehydrate Date objects from string representations\n          return detections.map(detection => ({\n            ...detection,\n            timestamp: new Date(detection.timestamp)\n          }));\n        }\n      } catch (error) {\n        console.error('Error loading detections from localStorage', error);\n        // If there's an error, clear the corrupted data to prevent future issues\n        localStorage.removeItem(DETECTIONS_STORAGE_KEY);\n      }\n      return [];\n    }\n    static #_ = _staticBlock = () => (this.ɵfac = function PersistenceService_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || PersistenceService)();\n    }, this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n      token: PersistenceService,\n      factory: PersistenceService.ɵfac,\n      providedIn: 'root'\n    }));\n  }\n  _staticBlock();\n  return PersistenceService;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}