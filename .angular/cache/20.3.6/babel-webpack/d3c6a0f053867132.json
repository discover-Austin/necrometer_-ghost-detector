{"ast":null,"code":"import { EventEmitter, signal, inject } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { UpgradeService } from '../../services/upgrade.service';\nimport { GeminiService } from '../../services/gemini.service';\nimport { AudioService } from '../../services/audio.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nconst _forTrack0 = ($index, $item) => $item.id;\nfunction LogbookComponent_Conditional_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵdomElementStart(0, \"div\", 2);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵdomElementStart(1, \"svg\", 6);\n    i0.ɵɵdomElement(2, \"path\", 7);\n    i0.ɵɵdomElementEnd();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵdomElementStart(3, \"p\", 8);\n    i0.ɵɵtext(4, \"Analyzing Spectral Data...\");\n    i0.ɵɵdomElementEnd();\n    i0.ɵɵdomElementStart(5, \"p\", 9);\n    i0.ɵɵtext(6, \"Connecting to the other side.\");\n    i0.ɵɵdomElementEnd()();\n  }\n}\nfunction LogbookComponent_Conditional_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵdomElementStart(0, \"div\", 3);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵdomElementStart(1, \"svg\", 10);\n    i0.ɵɵdomElement(2, \"path\", 11);\n    i0.ɵɵdomElementEnd();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵdomElementStart(3, \"p\", 12);\n    i0.ɵɵtext(4, \"Analysis Failed\");\n    i0.ɵɵdomElementEnd();\n    i0.ɵɵdomElementStart(5, \"p\", 13);\n    i0.ɵɵtext(6);\n    i0.ɵɵdomElementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(ctx_r0.error());\n  }\n}\nfunction LogbookComponent_Conditional_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵdomElementStart(0, \"div\", 4);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵdomElementStart(1, \"svg\", 14);\n    i0.ɵɵdomElement(2, \"path\", 15);\n    i0.ɵɵdomElementEnd();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵdomElementStart(3, \"p\", 16);\n    i0.ɵɵtext(4, \"No entities logged.\");\n    i0.ɵɵdomElementEnd();\n    i0.ɵɵdomElementStart(5, \"p\", 17);\n    i0.ɵɵtext(6, \"Return to the scanner to find activity.\");\n    i0.ɵɵdomElementEnd()();\n  }\n}\nfunction LogbookComponent_Conditional_6_For_2_Conditional_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵdomElementStart(0, \"p\", 25);\n    i0.ɵɵtext(1);\n    i0.ɵɵdomElementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r0.labError());\n  }\n}\nfunction LogbookComponent_Conditional_6_For_2_Conditional_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵdomElementStart(0, \"div\")(1, \"h4\", 36);\n    i0.ɵɵtext(2, \"Database Cross-Reference\");\n    i0.ɵɵdomElementEnd();\n    i0.ɵɵdomElementStart(3, \"p\", 37);\n    i0.ɵɵtext(4);\n    i0.ɵɵdomElementEnd()();\n  }\n  if (rf & 2) {\n    const result_r3 = ctx;\n    i0.ɵɵadvance(3);\n    i0.ɵɵclassProp(\"text-gray-300\", result_r3.match)(\"text-yellow-400\", !result_r3.match);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(result_r3.details);\n  }\n}\nfunction LogbookComponent_Conditional_6_For_2_Conditional_13_Conditional_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵdomElementStart(0, \"span\", 40);\n    i0.ɵɵtext(1, \"Checking...\");\n    i0.ɵɵdomElementEnd();\n  }\n}\nfunction LogbookComponent_Conditional_6_For_2_Conditional_13_Conditional_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵdomElementStart(0, \"span\");\n    i0.ɵɵtext(1, \"1 NC\");\n    i0.ɵɵdomElementEnd();\n  }\n}\nfunction LogbookComponent_Conditional_6_For_2_Conditional_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵdomElementStart(0, \"div\", 28)(1, \"div\")(2, \"h4\", 36);\n    i0.ɵɵtext(3, \"Cross-Reference\");\n    i0.ɵɵdomElementEnd();\n    i0.ɵɵdomElementStart(4, \"p\", 38);\n    i0.ɵɵtext(5, \"Check against global database.\");\n    i0.ɵɵdomElementEnd()();\n    i0.ɵɵdomElementStart(6, \"button\", 39);\n    i0.ɵɵdomListener(\"click\", function LogbookComponent_Conditional_6_For_2_Conditional_13_Template_button_click_6_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r0 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r0.runCrossReference());\n    });\n    i0.ɵɵconditionalCreate(7, LogbookComponent_Conditional_6_For_2_Conditional_13_Conditional_7_Template, 2, 0, \"span\", 40)(8, LogbookComponent_Conditional_6_For_2_Conditional_13_Conditional_8_Template, 2, 0, \"span\");\n    i0.ɵɵdomElementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(6);\n    i0.ɵɵdomProperty(\"disabled\", ctx_r0.labState() !== \"idle\");\n    i0.ɵɵadvance();\n    i0.ɵɵconditional(ctx_r0.labState() === \"cross-referencing\" ? 7 : 8);\n  }\n}\nfunction LogbookComponent_Conditional_6_For_2_Conditional_15_For_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵdomElementStart(0, \"span\", 42);\n    i0.ɵɵtext(1);\n    i0.ɵɵdomElementEnd();\n  }\n  if (rf & 2) {\n    const emotion_r5 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(emotion_r5);\n  }\n}\nfunction LogbookComponent_Conditional_6_For_2_Conditional_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵdomElementStart(0, \"div\")(1, \"h4\", 36);\n    i0.ɵɵtext(2, \"Emotional Resonance\");\n    i0.ɵɵdomElementEnd();\n    i0.ɵɵdomElementStart(3, \"div\", 41);\n    i0.ɵɵrepeaterCreate(4, LogbookComponent_Conditional_6_For_2_Conditional_15_For_5_Template, 2, 1, \"span\", 42, i0.ɵɵrepeaterTrackByIdentity);\n    i0.ɵɵdomElementEnd();\n    i0.ɵɵdomElementStart(6, \"p\", 43);\n    i0.ɵɵtext(7);\n    i0.ɵɵdomElementEnd()();\n  }\n  if (rf & 2) {\n    const result_r6 = ctx;\n    i0.ɵɵadvance(4);\n    i0.ɵɵrepeater(result_r6.emotions);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(result_r6.summary);\n  }\n}\nfunction LogbookComponent_Conditional_6_For_2_Conditional_16_Conditional_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵdomElementStart(0, \"span\", 40);\n    i0.ɵɵtext(1, \"Scanning...\");\n    i0.ɵɵdomElementEnd();\n  }\n}\nfunction LogbookComponent_Conditional_6_For_2_Conditional_16_Conditional_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵdomElementStart(0, \"span\");\n    i0.ɵɵtext(1, \"2 NC\");\n    i0.ɵɵdomElementEnd();\n  }\n}\nfunction LogbookComponent_Conditional_6_For_2_Conditional_16_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵdomElementStart(0, \"div\", 28)(1, \"div\")(2, \"h4\", 36);\n    i0.ɵɵtext(3, \"Resonance Scan\");\n    i0.ɵɵdomElementEnd();\n    i0.ɵɵdomElementStart(4, \"p\", 38);\n    i0.ɵɵtext(5, \"Analyze emotional signature.\");\n    i0.ɵɵdomElementEnd()();\n    i0.ɵɵdomElementStart(6, \"button\", 39);\n    i0.ɵɵdomListener(\"click\", function LogbookComponent_Conditional_6_For_2_Conditional_16_Template_button_click_6_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r0 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r0.runEmotionalResonanceScan());\n    });\n    i0.ɵɵconditionalCreate(7, LogbookComponent_Conditional_6_For_2_Conditional_16_Conditional_7_Template, 2, 0, \"span\", 40)(8, LogbookComponent_Conditional_6_For_2_Conditional_16_Conditional_8_Template, 2, 0, \"span\");\n    i0.ɵɵdomElementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(6);\n    i0.ɵɵdomProperty(\"disabled\", ctx_r0.labState() !== \"idle\");\n    i0.ɵɵadvance();\n    i0.ɵɵconditional(ctx_r0.labState() === \"scanning-resonance\" ? 7 : 8);\n  }\n}\nfunction LogbookComponent_Conditional_6_For_2_Conditional_18_For_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵdomElementStart(0, \"li\");\n    i0.ɵɵtext(1);\n    i0.ɵɵdomElementEnd();\n  }\n  if (rf & 2) {\n    const step_r8 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(step_r8);\n  }\n}\nfunction LogbookComponent_Conditional_6_For_2_Conditional_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵdomElementStart(0, \"div\")(1, \"h4\", 44);\n    i0.ɵɵtext(2, \"Containment Ritual Successful\");\n    i0.ɵɵdomElementEnd();\n    i0.ɵɵdomElementStart(3, \"ol\", 45);\n    i0.ɵɵrepeaterCreate(4, LogbookComponent_Conditional_6_For_2_Conditional_18_For_5_Template, 2, 1, \"li\", null, i0.ɵɵrepeaterTrackByIdentity);\n    i0.ɵɵdomElementEnd();\n    i0.ɵɵdomElementStart(6, \"p\", 46);\n    i0.ɵɵtext(7);\n    i0.ɵɵdomElementEnd()();\n  }\n  if (rf & 2) {\n    const result_r9 = ctx;\n    i0.ɵɵadvance(4);\n    i0.ɵɵrepeater(result_r9.steps);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(result_r9.outcome);\n  }\n}\nfunction LogbookComponent_Conditional_6_For_2_Conditional_19_Conditional_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵdomElementStart(0, \"span\", 40);\n    i0.ɵɵtext(1, \"Containing...\");\n    i0.ɵɵdomElementEnd();\n  }\n}\nfunction LogbookComponent_Conditional_6_For_2_Conditional_19_Conditional_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵdomElementStart(0, \"span\");\n    i0.ɵɵtext(1, \"10 NC\");\n    i0.ɵɵdomElementEnd();\n  }\n}\nfunction LogbookComponent_Conditional_6_For_2_Conditional_19_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n    i0.ɵɵdomElementStart(0, \"div\", 28)(1, \"div\")(2, \"h4\", 44);\n    i0.ɵɵtext(3, \"Containment Ritual\");\n    i0.ɵɵdomElementEnd();\n    i0.ɵɵdomElementStart(4, \"p\", 38);\n    i0.ɵɵtext(5, \"Stabilize and contain the entity.\");\n    i0.ɵɵdomElementEnd()();\n    i0.ɵɵdomElementStart(6, \"button\", 47);\n    i0.ɵɵdomListener(\"click\", function LogbookComponent_Conditional_6_For_2_Conditional_19_Template_button_click_6_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r0 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r0.runContainmentRitual());\n    });\n    i0.ɵɵconditionalCreate(7, LogbookComponent_Conditional_6_For_2_Conditional_19_Conditional_7_Template, 2, 0, \"span\", 40)(8, LogbookComponent_Conditional_6_For_2_Conditional_19_Conditional_8_Template, 2, 0, \"span\");\n    i0.ɵɵdomElementEnd()();\n  }\n  if (rf & 2) {\n    const entity_r11 = i0.ɵɵnextContext().$implicit;\n    const ctx_r0 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(6);\n    i0.ɵɵdomProperty(\"disabled\", ctx_r0.labState() !== \"idle\" || entity_r11.contained);\n    i0.ɵɵadvance();\n    i0.ɵɵconditional(ctx_r0.labState() === \"containing\" ? 7 : 8);\n  }\n}\nfunction LogbookComponent_Conditional_6_For_2_Conditional_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵdomElementStart(0, \"span\", 31);\n    i0.ɵɵtext(1, \"[CONTAINED]\");\n    i0.ɵɵdomElementEnd();\n  }\n}\nfunction LogbookComponent_Conditional_6_For_2_Conditional_34_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵdomElementStart(0, \"div\", 35)(1, \"p\", 48);\n    i0.ɵɵtext(2, \"Instability\");\n    i0.ɵɵdomElementEnd();\n    i0.ɵɵdomElementStart(3, \"div\", 49);\n    i0.ɵɵdomElement(4, \"div\", 50);\n    i0.ɵɵdomElementEnd()();\n  }\n  if (rf & 2) {\n    const entity_r11 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(4);\n    i0.ɵɵstyleProp(\"width\", entity_r11.instability, \"%\");\n  }\n}\nfunction LogbookComponent_Conditional_6_For_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n    i0.ɵɵdomElementStart(0, \"div\", 19)(1, \"div\", 20)(2, \"div\", 21)(3, \"div\", 22)(4, \"div\")(5, \"h3\", 23);\n    i0.ɵɵtext(6, \"Analysis Lab\");\n    i0.ɵɵdomElementEnd();\n    i0.ɵɵdomElementStart(7, \"p\", 24);\n    i0.ɵɵtext(8);\n    i0.ɵɵdomElementEnd()();\n    i0.ɵɵconditionalCreate(9, LogbookComponent_Conditional_6_For_2_Conditional_9_Template, 2, 1, \"p\", 25);\n    i0.ɵɵdomElementStart(10, \"div\", 26)(11, \"div\", 27);\n    i0.ɵɵconditionalCreate(12, LogbookComponent_Conditional_6_For_2_Conditional_12_Template, 5, 5, \"div\")(13, LogbookComponent_Conditional_6_For_2_Conditional_13_Template, 9, 2, \"div\", 28);\n    i0.ɵɵdomElementEnd();\n    i0.ɵɵdomElementStart(14, \"div\", 27);\n    i0.ɵɵconditionalCreate(15, LogbookComponent_Conditional_6_For_2_Conditional_15_Template, 8, 1, \"div\")(16, LogbookComponent_Conditional_6_For_2_Conditional_16_Template, 9, 2, \"div\", 28);\n    i0.ɵɵdomElementEnd();\n    i0.ɵɵdomElementStart(17, \"div\", 27);\n    i0.ɵɵconditionalCreate(18, LogbookComponent_Conditional_6_For_2_Conditional_18_Template, 8, 1, \"div\")(19, LogbookComponent_Conditional_6_For_2_Conditional_19_Template, 9, 2, \"div\", 28);\n    i0.ɵɵdomElementEnd()()()()();\n    i0.ɵɵdomElementStart(20, \"button\", 29);\n    i0.ɵɵdomListener(\"click\", function LogbookComponent_Conditional_6_For_2_Template_button_click_20_listener() {\n      const entity_r11 = i0.ɵɵrestoreView(_r2).$implicit;\n      const ctx_r0 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r0.selectEntity(entity_r11));\n    });\n    i0.ɵɵdomElementStart(21, \"div\", 28)(22, \"div\")(23, \"p\", 30);\n    i0.ɵɵtext(24);\n    i0.ɵɵconditionalCreate(25, LogbookComponent_Conditional_6_For_2_Conditional_25_Template, 2, 0, \"span\", 31);\n    i0.ɵɵdomElementEnd();\n    i0.ɵɵdomElementStart(26, \"p\", 9);\n    i0.ɵɵtext(27);\n    i0.ɵɵdomElementEnd()();\n    i0.ɵɵdomElementStart(28, \"div\", 32)(29, \"p\", 33);\n    i0.ɵɵtext(30);\n    i0.ɵɵdomElementEnd();\n    i0.ɵɵdomElementStart(31, \"p\", 34);\n    i0.ɵɵtext(32);\n    i0.ɵɵpipe(33, \"date\");\n    i0.ɵɵdomElementEnd()()();\n    i0.ɵɵconditionalCreate(34, LogbookComponent_Conditional_6_For_2_Conditional_34_Template, 5, 2, \"div\", 35);\n    i0.ɵɵdomElementEnd()();\n  }\n  if (rf & 2) {\n    let tmp_12_0;\n    let tmp_15_0;\n    let tmp_16_0;\n    let tmp_17_0;\n    const entity_r11 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext(2);\n    i0.ɵɵclassMap(ctx_r0.getEntryClass(entity_r11));\n    i0.ɵɵadvance();\n    i0.ɵɵclassProp(\"grid-rows-[0fr]\", ((tmp_12_0 = ctx_r0.selectedEntity()) == null ? null : tmp_12_0.id) !== entity_r11.id);\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate(entity_r11.backstory);\n    i0.ɵɵadvance();\n    i0.ɵɵconditional(ctx_r0.labError() ? 9 : -1);\n    i0.ɵɵadvance(3);\n    i0.ɵɵconditional((tmp_15_0 = ctx_r0.crossReferenceResult()) ? 12 : 13, tmp_15_0);\n    i0.ɵɵadvance(3);\n    i0.ɵɵconditional((tmp_16_0 = ctx_r0.emotionalResonanceResult()) ? 15 : 16, tmp_16_0);\n    i0.ɵɵadvance(3);\n    i0.ɵɵconditional((tmp_17_0 = ctx_r0.containmentResult()) ? 18 : 19, tmp_17_0);\n    i0.ɵɵadvance(5);\n    i0.ɵɵclassProp(\"text-[var(--color-primary-300)]\", !entity_r11.contained)(\"text-blue-300\", entity_r11.contained);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", entity_r11.name, \" \");\n    i0.ɵɵadvance();\n    i0.ɵɵconditional(entity_r11.contained ? 25 : -1);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(entity_r11.type);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"\", entity_r11.emfReading.toFixed(2), \" \\u00B5T\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(33, 19, entity_r11.timestamp, \"short\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵconditional(!entity_r11.contained ? 34 : -1);\n  }\n}\nfunction LogbookComponent_Conditional_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵdomElementStart(0, \"div\", 5);\n    i0.ɵɵrepeaterCreate(1, LogbookComponent_Conditional_6_For_2_Template, 35, 22, \"div\", 18, _forTrack0);\n    i0.ɵɵdomElementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵrepeater(ctx_r0.detections);\n  }\n}\nexport let LogbookComponent = /*#__PURE__*/(() => {\n  var _staticBlock;\n  class LogbookComponent {\n    constructor() {\n      this.detections = [];\n      this.isLoading = false;\n      this.error = null;\n      this.containEntity = new EventEmitter();\n      this.selectedEntity = signal(null, ...(ngDevMode ? [{\n        debugName: \"selectedEntity\"\n      }] : []));\n      this.labState = signal('idle', ...(ngDevMode ? [{\n        debugName: \"labState\"\n      }] : []));\n      this.labError = signal(null, ...(ngDevMode ? [{\n        debugName: \"labError\"\n      }] : []));\n      this.crossReferenceResult = signal(null, ...(ngDevMode ? [{\n        debugName: \"crossReferenceResult\"\n      }] : []));\n      this.emotionalResonanceResult = signal(null, ...(ngDevMode ? [{\n        debugName: \"emotionalResonanceResult\"\n      }] : []));\n      this.containmentResult = signal(null, ...(ngDevMode ? [{\n        debugName: \"containmentResult\"\n      }] : []));\n      this.upgradeService = inject(UpgradeService);\n      this.geminiService = inject(GeminiService);\n      this.audioService = inject(AudioService);\n    }\n    selectEntity(entity) {\n      if (this.selectedEntity()?.id === entity.id) {\n        this.selectedEntity.set(null); // Toggle off\n      } else {\n        this.selectedEntity.set(entity);\n        // Reset lab state when a new entity is selected\n        this.labError.set(null);\n        this.crossReferenceResult.set(null);\n        this.emotionalResonanceResult.set(null);\n        this.containmentResult.set(null);\n        this.labState.set('idle');\n      }\n    }\n    runCrossReference() {\n      const cost = 1;\n      if (!this.upgradeService.spendCredits(cost)) {\n        this.labError.set(`Insufficient Credits. Requires ${cost} NC.`);\n        return;\n      }\n      this.labState.set('cross-referencing');\n      this.labError.set(null);\n      this.geminiService.crossReferenceEntity(this.selectedEntity()).then(result => {\n        this.crossReferenceResult.set(result);\n        this.audioService.playSuccessSound();\n      }).catch(() => this.labError.set('Database connection failed.')).finally(() => this.labState.set('idle'));\n    }\n    runEmotionalResonanceScan() {\n      const cost = 2;\n      if (!this.upgradeService.spendCredits(cost)) {\n        this.labError.set(`Insufficient Credits. Requires ${cost} NC.`);\n        return;\n      }\n      this.labState.set('scanning-resonance');\n      this.labError.set(null);\n      this.geminiService.getEmotionalResonance(this.selectedEntity()).then(result => {\n        this.emotionalResonanceResult.set(result);\n        this.audioService.playSuccessSound();\n      }).catch(() => this.labError.set('Resonance scan failed.')).finally(() => this.labState.set('idle'));\n    }\n    runContainmentRitual() {\n      const cost = 10;\n      const entity = this.selectedEntity();\n      if (!entity) return;\n      if (!this.upgradeService.spendCredits(cost)) {\n        this.labError.set(`Insufficient Credits. Requires ${cost} NC.`);\n        return;\n      }\n      this.labState.set('containing');\n      this.labError.set(null);\n      this.geminiService.getContainmentRitual(entity).then(result => {\n        this.containmentResult.set(result);\n        this.containEntity.emit(entity);\n        this.audioService.playContainSound();\n      }).catch(() => this.labError.set('Containment ritual failed. Energy field unstable.')).finally(() => this.labState.set('idle'));\n    }\n    getEntryClass(entity) {\n      if (entity.contained) {\n        return 'border-blue-400/80';\n      }\n      if (entity.emfReading > 98) return 'border-red-500/50';\n      if (entity.emfReading > 95) return 'border-yellow-500/50';\n      if (entity.emfReading > 90) return 'border-teal-400/50';\n      return 'border-[var(--color-primary-500)]/50';\n    }\n    static #_ = _staticBlock = () => (this.ɵfac = function LogbookComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || LogbookComponent)();\n    }, this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: LogbookComponent,\n      selectors: [[\"app-logbook\"]],\n      inputs: {\n        detections: \"detections\",\n        isLoading: \"isLoading\",\n        error: \"error\"\n      },\n      outputs: {\n        containEntity: \"containEntity\"\n      },\n      decls: 7,\n      vars: 1,\n      consts: [[1, \"flex\", \"flex-col\", \"h-full\"], [1, \"text-xl\", \"font-bold\", \"text-[var(--color-primary-400)]\", \"mb-4\", \"border-b\", \"border-[var(--color-primary-500)]/20\", \"pb-2\"], [1, \"flex\", \"flex-col\", \"items-center\", \"justify-center\", \"flex-grow\", \"text-center\", \"p-4\", \"bg-gray-800/30\", \"rounded-lg\", \"animate-pulse\"], [1, \"flex\", \"flex-col\", \"items-center\", \"justify-center\", \"flex-grow\", \"text-center\", \"p-4\", \"bg-red-900/30\", \"rounded-lg\", \"border\", \"border-red-500/50\"], [1, \"flex\", \"flex-col\", \"items-center\", \"justify-center\", \"flex-grow\", \"text-center\", \"p-4\", \"bg-gray-800/30\", \"rounded-lg\"], [1, \"space-y-3\", \"overflow-y-auto\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"fill\", \"none\", \"viewBox\", \"0 0 24 24\", \"stroke-width\", \"1.5\", \"stroke\", \"currentColor\", 1, \"w-12\", \"h-12\", \"text-[var(--color-primary-400)]\", \"mb-4\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"d\", \"M12 9.75v6.75m0 0l-3-3m3 3l3-3m-8.25 6a4.5 4.5 0 01-1.41-8.775 5.25 5.25 0 0110.233-2.33 3 3 0 013.758 3.848A3.752 3.752 0 0118 19.5H6.75z\"], [1, \"text-lg\", \"text-[var(--color-primary-300)]\"], [1, \"text-sm\", \"text-gray-400\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"fill\", \"none\", \"viewBox\", \"0 0 24 24\", \"stroke-width\", \"1.5\", \"stroke\", \"currentColor\", 1, \"w-12\", \"h-12\", \"text-red-400\", \"mb-4\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"d\", \"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z\"], [1, \"text-lg\", \"text-red-300\"], [1, \"text-sm\", \"text-gray-300\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"fill\", \"none\", \"viewBox\", \"0 0 24 24\", \"stroke-width\", \"1.5\", \"stroke\", \"currentColor\", 1, \"w-12\", \"h-12\", \"text-gray-500\", \"mb-4\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"d\", \"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z\"], [1, \"text-lg\", \"text-gray-400\"], [1, \"text-sm\", \"text-gray-500\"], [1, \"border-l-4\", \"rounded-r-md\", \"bg-gray-800/50\", \"transition-all\", \"duration-300\", 3, \"class\"], [1, \"border-l-4\", \"rounded-r-md\", \"bg-gray-800/50\", \"transition-all\", \"duration-300\"], [\"]\", \"selectedEntity()?.id === entity.id\", 1, \"grid\", \"transition-all\", \"duration-500\", \"ease-in-out\", 3, \"grid-rows-[1fr\"], [1, \"overflow-hidden\"], [1, \"px-4\", \"pb-4\", \"pt-2\", \"border-t\", \"border-gray-700/50\", \"space-y-4\"], [1, \"text-lg\", \"font-bold\", \"text-[var(--color-primary-300)]\", \"mb-2\"], [1, \"text-sm\", \"text-gray-400\", \"leading-relaxed\", \"border-l-2\", \"border-[var(--color-primary-500)]/30\", \"pl-3\"], [1, \"text-red-400\", \"text-center\", \"text-sm\", \"p-2\", \"bg-red-900/50\", \"rounded-md\"], [1, \"space-y-3\"], [1, \"bg-black/30\", \"p-3\", \"rounded-md\"], [1, \"flex\", \"justify-between\", \"items-center\"], [1, \"w-full\", \"text-left\", \"p-3\", 3, \"click\"], [1, \"font-bold\", \"text-lg\"], [1, \"text-xs\", \"font-normal\", \"text-blue-400\", \"ml-2\"], [1, \"text-right\"], [1, \"font-mono\", \"text-lg\", \"text-[var(--color-primary-300)]\"], [1, \"text-xs\", \"text-gray-500\"], [1, \"mt-2\"], [1, \"font-bold\", \"text-[var(--color-primary-400)]\"], [1, \"text-sm\", \"mt-1\"], [1, \"text-xs\", \"text-gray-400\"], [1, \"font-bold\", \"py-1\", \"px-3\", \"rounded-md\", \"bg-[var(--color-primary-700)]\", \"hover:bg-[var(--color-primary-600)]\", \"disabled:bg-gray-600\", \"disabled:text-gray-400\", \"transition-colors\", \"text-white\", \"text-sm\", 3, \"click\", \"disabled\"], [1, \"animate-pulse\"], [1, \"flex\", \"space-x-2\", \"mt-2\"], [1, \"text-xs\", \"font-bold\", \"bg-teal-800/70\", \"text-teal-200\", \"px-2\", \"py-1\", \"rounded-full\"], [1, \"text-sm\", \"mt-2\", \"text-gray-300\"], [1, \"font-bold\", \"text-blue-400\"], [1, \"text-sm\", \"mt-2\", \"text-gray-300\", \"list-decimal\", \"list-inside\", \"space-y-1\"], [1, \"text-sm\", \"mt-2\", \"text-blue-300\", \"font-semibold\"], [1, \"font-bold\", \"py-1\", \"px-3\", \"rounded-md\", \"bg-blue-700\", \"hover:bg-blue-600\", \"disabled:bg-gray-600\", \"disabled:text-gray-400\", \"transition-colors\", \"text-white\", \"text-sm\", 3, \"click\", \"disabled\"], [1, \"text-xs\", \"text-red-400\", \"uppercase\"], [1, \"w-full\", \"bg-gray-700/50\", \"rounded-full\", \"h-1.5\", \"mt-1\"], [1, \"bg-red-500\", \"h-1.5\", \"rounded-full\"]],\n      template: function LogbookComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵdomElementStart(0, \"div\", 0)(1, \"h2\", 1);\n          i0.ɵɵtext(2, \"Entity Logbook\");\n          i0.ɵɵdomElementEnd();\n          i0.ɵɵconditionalCreate(3, LogbookComponent_Conditional_3_Template, 7, 0, \"div\", 2)(4, LogbookComponent_Conditional_4_Template, 7, 1, \"div\", 3)(5, LogbookComponent_Conditional_5_Template, 7, 0, \"div\", 4)(6, LogbookComponent_Conditional_6_Template, 3, 0, \"div\", 5);\n          i0.ɵɵdomElementEnd();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(3);\n          i0.ɵɵconditional(ctx.isLoading ? 3 : ctx.error ? 4 : ctx.detections.length === 0 ? 5 : 6);\n        }\n      },\n      dependencies: [CommonModule, i1.DatePipe],\n      encapsulation: 2,\n      changeDetection: 0\n    }));\n  }\n  _staticBlock();\n  return LogbookComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}