{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/grand/necrometer_-ghost-detector-1/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { signal, inject } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { GeminiService } from '../../services/gemini.service';\nimport { UpgradeService } from '../../services/upgrade.service';\nimport * as i0 from \"@angular/core\";\nfunction EchoesComponent_Case_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵdomElementStart(0, \"div\", 5);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵdomElementStart(1, \"svg\", 11);\n    i0.ɵɵdomElement(2, \"path\", 12);\n    i0.ɵɵdomElementEnd();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵdomElementStart(3, \"p\", 13);\n    i0.ɵɵtext(4, \"Ready to scan for temporal activity.\");\n    i0.ɵɵdomElementEnd();\n    i0.ɵɵdomElementStart(5, \"p\", 14);\n    i0.ɵɵtext(6);\n    i0.ɵɵdomElementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate1(\"Scan Cost: \", ctx_r0.scanCost, \" NC\");\n  }\n}\nfunction EchoesComponent_Case_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵdomElementStart(0, \"div\", 6);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵdomElementStart(1, \"svg\", 15);\n    i0.ɵɵdomElement(2, \"circle\", 16)(3, \"path\", 17);\n    i0.ɵɵdomElementEnd();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵdomElementStart(4, \"p\", 18);\n    i0.ɵɵtext(5, \"SCANNING TIMELINES...\");\n    i0.ɵɵdomElementEnd()();\n  }\n}\nfunction EchoesComponent_Case_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵdomElementStart(0, \"div\", 7);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵdomElementStart(1, \"svg\", 19);\n    i0.ɵɵdomElement(2, \"path\", 20);\n    i0.ɵɵdomElementEnd();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵdomElementStart(3, \"p\", 21);\n    i0.ɵɵtext(4, \"Scan Failed\");\n    i0.ɵɵdomElementEnd();\n    i0.ɵɵdomElementStart(5, \"p\", 22);\n    i0.ɵɵtext(6);\n    i0.ɵɵdomElementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(ctx_r0.error());\n  }\n}\nfunction EchoesComponent_Case_10_Conditional_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵdomElementStart(0, \"div\", 23)(1, \"p\", 24);\n    i0.ɵɵtext(2);\n    i0.ɵɵdomElementEnd();\n    i0.ɵɵdomElementStart(3, \"h3\", 25);\n    i0.ɵɵtext(4);\n    i0.ɵɵdomElementEnd();\n    i0.ɵɵdomElementStart(5, \"p\", 26);\n    i0.ɵɵtext(6);\n    i0.ɵɵdomElementEnd()();\n  }\n  if (rf & 2) {\n    const e_r2 = ctx;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", e_r2.era, \" Era\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(e_r2.title);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(e_r2.description);\n  }\n}\nfunction EchoesComponent_Case_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵconditionalCreate(0, EchoesComponent_Case_10_Conditional_0_Template, 7, 3, \"div\", 23);\n  }\n  if (rf & 2) {\n    let tmp_1_0;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵconditional((tmp_1_0 = ctx_r0.echo()) ? 0 : -1, tmp_1_0);\n  }\n}\nfunction EchoesComponent_Conditional_12_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵdomElementStart(0, \"button\", 27);\n    i0.ɵɵdomListener(\"click\", function EchoesComponent_Conditional_12_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r0 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r0.scanForEcho());\n    });\n    i0.ɵɵtext(1, \" Initiate Chrono-Scan \");\n    i0.ɵɵdomElementEnd();\n  }\n}\nfunction EchoesComponent_Conditional_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵdomElementStart(0, \"button\", 28);\n    i0.ɵɵdomListener(\"click\", function EchoesComponent_Conditional_13_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r0 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r0.reset());\n    });\n    i0.ɵɵtext(1, \" Scan Again \");\n    i0.ɵɵdomElementEnd();\n  }\n}\nexport let EchoesComponent = /*#__PURE__*/(() => {\n  var _staticBlock;\n  class EchoesComponent {\n    constructor() {\n      this.state = signal('idle', ...(ngDevMode ? [{\n        debugName: \"state\"\n      }] : []));\n      this.echo = signal(null, ...(ngDevMode ? [{\n        debugName: \"echo\"\n      }] : []));\n      this.error = signal(null, ...(ngDevMode ? [{\n        debugName: \"error\"\n      }] : []));\n      this.geminiService = inject(GeminiService);\n      this.upgradeService = inject(UpgradeService);\n      this.scanCost = 3;\n    }\n    scanForEcho() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        _this.echo.set(null);\n        _this.error.set(null);\n        if (!_this.upgradeService.spendCredits(_this.scanCost)) {\n          _this.error.set(`Insufficient Credits. Scan requires ${_this.scanCost} NC.`);\n          _this.state.set('error');\n          return;\n        }\n        _this.state.set('scanning');\n        try {\n          const result = yield _this.geminiService.getTemporalEcho();\n          _this.echo.set(result);\n          _this.state.set('result');\n        } catch (err) {\n          console.error('Temporal Echo scan failed:', err);\n          _this.error.set('Failed to resolve temporal distortions. The signal is too weak.');\n          _this.state.set('error');\n        }\n      })();\n    }\n    reset() {\n      this.state.set('idle');\n      this.error.set(null);\n      this.echo.set(null);\n    }\n    static #_ = _staticBlock = () => (this.ɵfac = function EchoesComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || EchoesComponent)();\n    }, this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: EchoesComponent,\n      selectors: [[\"app-echoes\"]],\n      decls: 14,\n      vars: 2,\n      consts: [[1, \"flex\", \"flex-col\", \"h-full\", \"items-center\", \"justify-between\", \"text-center\", \"p-4\", \"rounded-lg\", \"bg-gray-800/20\", \"border-2\", \"border-[var(--color-primary-500)]/20\"], [1, \"w-full\"], [1, \"text-xl\", \"font-bold\", \"text-[var(--color-primary-400)]\", \"mb-4\", \"border-b\", \"border-[var(--color-primary-500)]/20\", \"pb-2\"], [1, \"text-sm\", \"text-gray-400\", \"mb-4\"], [1, \"flex-grow\", \"w-full\", \"flex\", \"items-center\", \"justify-center\"], [1, \"flex\", \"flex-col\", \"items-center\"], [1, \"flex\", \"flex-col\", \"items-center\", \"text-teal-300\"], [1, \"flex\", \"flex-col\", \"items-center\", \"justify-center\", \"text-center\", \"p-4\", \"bg-red-900/30\", \"rounded-lg\", \"border\", \"border-red-500/50\"], [1, \"w-full\", \"pt-4\"], [1, \"w-full\", \"bg-[var(--color-primary-700)]\", \"hover:bg-[var(--color-primary-600)]\", \"text-white\", \"font-bold\", \"py-3\", \"px-4\", \"rounded-lg\", \"transition-colors\"], [1, \"w-full\", \"bg-gray-600\", \"hover:bg-gray-500\", \"text-white\", \"font-bold\", \"py-3\", \"px-4\", \"rounded-lg\", \"transition-colors\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"fill\", \"none\", \"viewBox\", \"0 0 24 24\", \"stroke-width\", \"1.5\", \"stroke\", \"currentColor\", 1, \"w-16\", \"h-16\", \"text-gray-600\", \"mb-4\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"d\", \"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\"], [1, \"text-gray-400\"], [1, \"text-xs\", \"text-yellow-400\", \"mt-1\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"fill\", \"none\", \"viewBox\", \"0 0 24 24\", 1, \"animate-spin\", \"h-12\", \"w-12\", \"mb-4\"], [\"cx\", \"12\", \"cy\", \"12\", \"r\", \"10\", \"stroke\", \"currentColor\", \"stroke-width\", \"4\", 1, \"opacity-25\"], [\"fill\", \"currentColor\", \"d\", \"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\", 1, \"opacity-75\"], [1, \"font-bold\", \"text-lg\", \"animate-pulse\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"fill\", \"none\", \"viewBox\", \"0 0 24 24\", \"stroke-width\", \"1.5\", \"stroke\", \"currentColor\", 1, \"w-12\", \"h-12\", \"text-red-400\", \"mb-4\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"d\", \"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z\"], [1, \"text-lg\", \"text-red-300\"], [1, \"text-sm\", \"text-gray-300\"], [1, \"w-full\", \"text-left\", \"p-4\", \"bg-black/30\", \"rounded-lg\", \"border\", \"border-gray-600\", \"animate-fade-in\"], [1, \"text-sm\", \"text-gray-400\", \"uppercase\", \"tracking-widest\"], [1, \"text-2xl\", \"font-bold\", \"text-[var(--color-primary-300)]\", \"mt-1\", \"mb-2\"], [1, \"text-gray-300\", \"leading-relaxed\"], [1, \"w-full\", \"bg-[var(--color-primary-700)]\", \"hover:bg-[var(--color-primary-600)]\", \"text-white\", \"font-bold\", \"py-3\", \"px-4\", \"rounded-lg\", \"transition-colors\", 3, \"click\"], [1, \"w-full\", \"bg-gray-600\", \"hover:bg-gray-500\", \"text-white\", \"font-bold\", \"py-3\", \"px-4\", \"rounded-lg\", \"transition-colors\", 3, \"click\"]],\n      template: function EchoesComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵdomElementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h2\", 2);\n          i0.ɵɵtext(3, \"Chrono-Scan\");\n          i0.ɵɵdomElementEnd();\n          i0.ɵɵdomElementStart(4, \"p\", 3);\n          i0.ɵɵtext(5, \"Detect and analyze residual temporal echoes.\");\n          i0.ɵɵdomElementEnd()();\n          i0.ɵɵdomElementStart(6, \"div\", 4);\n          i0.ɵɵconditionalCreate(7, EchoesComponent_Case_7_Template, 7, 1, \"div\", 5)(8, EchoesComponent_Case_8_Template, 6, 0, \"div\", 6)(9, EchoesComponent_Case_9_Template, 7, 1, \"div\", 7)(10, EchoesComponent_Case_10_Template, 1, 1);\n          i0.ɵɵdomElementEnd();\n          i0.ɵɵdomElementStart(11, \"div\", 8);\n          i0.ɵɵconditionalCreate(12, EchoesComponent_Conditional_12_Template, 2, 0, \"button\", 9)(13, EchoesComponent_Conditional_13_Template, 2, 0, \"button\", 10);\n          i0.ɵɵdomElementEnd()();\n        }\n        if (rf & 2) {\n          let tmp_0_0;\n          i0.ɵɵadvance(7);\n          i0.ɵɵconditional((tmp_0_0 = ctx.state()) === \"idle\" ? 7 : tmp_0_0 === \"scanning\" ? 8 : tmp_0_0 === \"error\" ? 9 : tmp_0_0 === \"result\" ? 10 : -1);\n          i0.ɵɵadvance(5);\n          i0.ɵɵconditional(ctx.state() === \"idle\" ? 12 : 13);\n        }\n      },\n      dependencies: [CommonModule],\n      styles: [\".animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .5s ease-in-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}\"],\n      changeDetection: 0\n    }));\n  }\n  _staticBlock();\n  return EchoesComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}