{"ast":null,"code":"import * as i0 from \"@angular/core\";\nconst DETECTIONS_STORAGE_KEY = 'necrometer_detections';\nexport let PersistenceService = /*#__PURE__*/(() => {\n  var _staticBlock;\n  class PersistenceService {\n    saveDetections(detections) {\n      try {\n        const data = JSON.stringify(detections);\n        localStorage.setItem(DETECTIONS_STORAGE_KEY, data);\n      } catch (error) {\n        console.error('Error saving detections to localStorage', error);\n      }\n    }\n    loadDetections() {\n      try {\n        const data = localStorage.getItem(DETECTIONS_STORAGE_KEY);\n        if (data) {\n          const detections = JSON.parse(data);\n          // Rehydrate Date objects from string representations\n          return detections.map(detection => ({\n            ...detection,\n            timestamp: new Date(detection.timestamp)\n          }));\n        }\n      } catch (error) {\n        console.error('Error loading detections from localStorage', error);\n        // If there's an error, clear the corrupted data to prevent future issues\n        localStorage.removeItem(DETECTIONS_STORAGE_KEY);\n      }\n      return [];\n    }\n    static #_ = _staticBlock = () => (this.ɵfac = function PersistenceService_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || PersistenceService)();\n    }, this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n      token: PersistenceService,\n      factory: PersistenceService.ɵfac,\n      providedIn: 'root'\n    }));\n  }\n  _staticBlock();\n  return PersistenceService;\n})();","map":{"version":3,"names":["DETECTIONS_STORAGE_KEY","PersistenceService","_staticBlock","saveDetections","detections","data","JSON","stringify","localStorage","setItem","error","console","loadDetections","getItem","parse","map","detection","timestamp","Date","removeItem","_","factory","ɵfac","providedIn"],"sources":["C:\\Users\\grand\\necrometer_-ghost-detector-1\\src\\services\\persistence.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { DetectedEntity } from '../types';\r\n\r\nconst DETECTIONS_STORAGE_KEY = 'necrometer_detections';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class PersistenceService {\r\n\r\n  saveDetections(detections: DetectedEntity[]): void {\r\n    try {\r\n      const data = JSON.stringify(detections);\r\n      localStorage.setItem(DETECTIONS_STORAGE_KEY, data);\r\n    } catch (error) {\r\n      console.error('Error saving detections to localStorage', error);\r\n    }\r\n  }\r\n\r\n  loadDetections(): DetectedEntity[] {\r\n    try {\r\n      const data = localStorage.getItem(DETECTIONS_STORAGE_KEY);\r\n      if (data) {\r\n        const detections = JSON.parse(data) as DetectedEntity[];\r\n        // Rehydrate Date objects from string representations\r\n        return detections.map(detection => ({\r\n          ...detection,\r\n          timestamp: new Date(detection.timestamp),\r\n        }));\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading detections from localStorage', error);\r\n      // If there's an error, clear the corrupted data to prevent future issues\r\n      localStorage.removeItem(DETECTIONS_STORAGE_KEY);\r\n    }\r\n    return [];\r\n  }\r\n}\r\n"],"mappings":";AAGA,MAAMA,sBAAsB,GAAG,uBAAuB;AAKtD,WAAaC,kBAAkB;EAAA,IAAAC,YAAA;EAAzB,MAAOD,kBAAkB;IAE7BE,cAAcA,CAACC,UAA4B;MACzC,IAAI;QACF,MAAMC,IAAI,GAAGC,IAAI,CAACC,SAAS,CAACH,UAAU,CAAC;QACvCI,YAAY,CAACC,OAAO,CAACT,sBAAsB,EAAEK,IAAI,CAAC;MACpD,CAAC,CAAC,OAAOK,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,yCAAyC,EAAEA,KAAK,CAAC;MACjE;IACF;IAEAE,cAAcA,CAAA;MACZ,IAAI;QACF,MAAMP,IAAI,GAAGG,YAAY,CAACK,OAAO,CAACb,sBAAsB,CAAC;QACzD,IAAIK,IAAI,EAAE;UACR,MAAMD,UAAU,GAAGE,IAAI,CAACQ,KAAK,CAACT,IAAI,CAAqB;UACvD;UACA,OAAOD,UAAU,CAACW,GAAG,CAACC,SAAS,KAAK;YAClC,GAAGA,SAAS;YACZC,SAAS,EAAE,IAAIC,IAAI,CAACF,SAAS,CAACC,SAAS;WACxC,CAAC,CAAC;QACL;MACF,CAAC,CAAC,OAAOP,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,4CAA4C,EAAEA,KAAK,CAAC;QAClE;QACAF,YAAY,CAACW,UAAU,CAACnB,sBAAsB,CAAC;MACjD;MACA,OAAO,EAAE;IACX;IAAC,QAAAoB,CAAA,GAAAlB,YAAA,GAAAA,CAAA,M;uCA5BUD,kBAAkB;IAAA,G;aAAlBA,kBAAkB;MAAAoB,OAAA,EAAlBpB,kBAAkB,CAAAqB,IAAA;MAAAC,UAAA,EAFjB;IAAM;;;SAEPtB,kBAAkB;AAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}